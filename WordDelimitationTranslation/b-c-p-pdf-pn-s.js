(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{144:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return f}));var r=function(t,e){for(var n=0;n<e.length-2;n+=3){var r=e[n+2];r="a"<=r?r.charCodeAt(0)-87:Number(r),r="+"==e[n+1]?t>>>r:t<<r,t="+"==e[n]?t+r&4294967295:t^r}return t},s=function(t){for(var e=[],n=0,s=0;n<t.length;++n){var o=t.charCodeAt(n);128>o?e[s++]=o:(2048>o?e[s++]=o>>6|192:(e[s++]=o>>12|224,e[s++]=o>>6&63|128),e[s++]=63&o|128)}var i=0;for(s=0;s<e.length;s++)i+=e[s],i=r(i,"+-a^+6");return 0>(i=r(i,"+-3^+b+-f"))&&(i=2147483648+(2147483647&i)),(i%=1e6).toString()+"."+(0^i).toString()},o=n(49),i=n(19),a=n.n(i);function c(t,e){let n,r="",s=function(t,e){for(let n,r=0;r<e.length-2;r+=3)n="a"<=(n=e.charAt(r+2))?n.charCodeAt(0)-87:Number(n),n="+"===e.charAt(r+1)?t>>>n:t<<n,t="+"===e.charAt(r)?t+n&4294967295:t^n;return t},o=(n=""!==r?r:(r=e||"")||"").split(".");n=Number(o[0])||0;let i=[],a=0,c=0;for(;c<t.length;c++){let e=t.charCodeAt(c);128>e?i[a++]=e:(2048>e?i[a++]=e>>6|192:(55296==(64512&e)&&c+1<t.length&&56320==(64512&t.charCodeAt(c+1))?(e=65536+((1023&e)<<10)+(1023&t.charCodeAt(++c)),i[a++]=e>>18|240,i[a++]=e>>12&63|128):i[a++]=e>>12|224,i[a++]=e>>6&63|128),i[a++]=63&e|128)}for(t=n,a=0;a<i.length;a++)t=s(t+=i[a],"+-a^+6");return t=s(t,"+-3^+b+-f"),0>(t^=Number(o[1])||0)&&(t=2147483648+(2147483647&t)),(t%=1e6).toString()+"."+(t^n)}var u=n(44);var l=n(396),d=n(42),m=n(70);class h extends d.a{constructor(t,e="cn"){super(t,l,!0),this.token=null,this.region=e}isSameLang(t,e){return t.src===e.destination}async queryDirect(t,e,n="auto"){const r=Object(m.a)((()=>function(t,e,n="auto"){return a.a.get("https://translate.googleapis.com/translate_a/single",{params:{client:"gtx",sl:n,tl:e,dj:"1",dt:["t","bd","qc","rm","ex","at","ss","rw","ld"],q:t,tk:s(t)},paramsSerializer:o.a})}(t,e,n)),{beforeRetry(t){var e,n;return 429===(null===(n=null===(e=t.axiosError)||void 0===e?void 0:e.response)||void 0===n?void 0:n.status)}}),i=Object(m.a)((async()=>function(t,e,n,r,s){return a.a.get(`https://translate.google.${s}/translate_a/single`,{params:{client:"webapp",sl:n,tl:e,dj:"1",ie:"UTF-8",oe:"UTF-8",source:"icon",dt:["t","bd","qc","rm","ex","at","ss","rw","ld"],q:t,tk:c(t,r)},paramsSerializer:o.a})}(t,e,n,this.token||(this.token=await async function(t){const e=(await a.a.get(`https://translate.google.${t}/translate_a/element.js`,{responseType:"text"})).data.match(/_ctkk='(\d+\.\d+)'/);if(e)return e[1];throw new u.a({type:"GET_TOKEN_FAILED"})}(this.region)),this.region)),{beforeRetry:()=>(this.token=null,!1)});let l;try{l=(await r).data}catch(t){l=(await i).data}return l}transform(t,e){var n;const{text:r,destination:s}=t,o=null==e?void 0:e.src,i={text:r,from:o&&this.convertToStandard(o),to:s&&this.convertToStandard(s),link:`https://translate.google.${this.region}/#view=home&op=translate&sl=${o||"auto"}&tl=${s||"zh-CN"}&text=${encodeURIComponent(r)}`};if(e){try{i.dict=null===(n=e.dict)||void 0===n?void 0:n.map((t=>({pos:t.pos,terms:t.terms})))}catch(t){}try{let t;e.sentences.some((e=>{if("src_translit"in e)return t=e.src_translit,!0})),t&&(i.phonetic=[{value:`${t}`,ttsURI:i.from&&this.getTTS(r,i.from)}])}catch(t){}try{!i.phonetic&&i.from&&(i.ttsURI=this.getTTS(r,i.from))}catch(t){}try{i.result=e.sentences.map((t=>"trans"in t?t.trans:"")).join("").split("\n")}catch(t){}}return i}getTTS(t,e){const n=this.convertToCustom(e);if(!n)throw new u.a({type:"UNSUPPORTED_LANGUAGE",message:`${this.service.name}不支持朗读${e}`});return`https://translate.googleapis.com/translate_tts?client=gtx&tl=${n}&ie=UTF-8&q=${encodeURIComponent(t)}`}}const p={id:"GoogleWeb",name:"谷歌翻译",shortName:"谷歌",icon:browser.runtime.getURL("google.ico")},f=new h(p)},15:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var r,s=n(19),o=n.n(s);function i(t){return null==t?void 0:t.isError}function a(t){return null==t?void 0:t.isAxiosError}!function(t){t.VIP_OUTDATED="VIP_OUTDATED"}(r||(r={}));const c=o.a.create({baseURL:"https://hs-api.limingkai.cn/",validateStatus:function(t){return t>=200&&t<300||304===t}});c.interceptors.response.use((async t=>{const e=t.data;return i(e)?("VIP_OUTDATED"===e.errorCode&&browser.storage.local.set({user:e.data}),Promise.reject(e)):t}),(t=>{var e;return a(t)&&401===(null===(e=t.response)||void 0===e?void 0:e.status)&&browser.storage.local.remove(["user","optionsSyncAt","favoritesSyncAt","historiesSyncAt"]),Promise.reject(t)}))},159:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n(42),s=n(44),o=n(19),i=n.n(o);function a(t){var e,n,r,s,o;const i={},a=null===(e=t.textContent)||void 0===e?void 0:e.trim().split(/\s+/);a&&(i.name=a[0],i.value=null===(n=a[1])||void 0===n?void 0:n.slice(1,-1));const c=t.nextElementSibling;if(null==c?void 0:c.matches(".hd_tf")){const t=null===(o=null===(s=null===(r=c.getElementsByTagName("a")[0])||void 0===r?void 0:r.getAttribute("onclick"))||void 0===s?void 0:s.match(/'(http[^']+)'/))||void 0===o?void 0:o[1];t&&(i.ttsURI=t)}return i}class c extends r.a{constructor(t){super(t,{"中文(简体)":"中文(简体)","英语":"英语"})}async queryDirect(t){var e,n;const r=(await i.a.get("https://bing.com/dict/search?q="+encodeURIComponent(t),{responseType:"document"})).data;if(null===(n=null===(e=r.getElementsByClassName("p1-11")[0])||void 0===e?void 0:e.textContent)||void 0===n?void 0:n.trim())throw new s.a({type:"OTHER",message:"没有提供词典翻译结果。"});return r}transform(t,e){var n,r;const{text:s}=t,o={text:s,link:"https://cn.bing.com/dict/search?q="+encodeURIComponent(s)};if(e){const t=e.getElementsByClassName("qdef")[0];if(t){const e=t.getElementsByClassName("hd_p1_1")[0];if(e){const t=[],r=e.getElementsByClassName("hd_prUS")[0];r&&t.push(a(r));const s=e.getElementsByClassName("hd_pr")[0];if(s&&t.push(a(s)),r||s)o.from="英语";else{const r=null===(n=e.textContent)||void 0===n?void 0:n.trim().slice(1,-1);r&&(o.from="中文(简体)",t.push({value:r}))}t.length&&(o.phonetic=t)}const r=[];t.querySelectorAll("ul li").forEach((t=>{var e,n,s;const i=t.getElementsByClassName("pos")[0];if(i){const t=i.nextElementSibling;if(null==t?void 0:t.matches(".b_regtxt"))if(i.matches(".web")){const n=null===(e=t.textContent)||void 0===e?void 0:e.trim();n&&(o.result=[n])}else{const e=null===(n=t.textContent)||void 0===n?void 0:n.trim().split(/；\s*/);e&&r.push({pos:null===(s=i.textContent)||void 0===s?void 0:s.trim(),terms:e})}}})),r.length&&(o.dict=r)}o.dict||(null===(r=o.result)||void 0===r?void 0:r.length)||(o.error={type:"API_SERVER_ERROR",message:`请<a href="${o.link}" target="_blank" rel="noreferrer">点击这里</a>然后点击下方的重试按钮，如果仍然报这个错误，则说明必应词典没有提供此文本的翻译结果。`})}return o}}const u={id:"BingDictWeb",name:"必应词典",shortName:"必应词典",icon:browser.runtime.getURL("bing.ico")},l=new c(u)},179:function(t,e,n){"use strict";n.d(e,"d",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return g})),n.d(e,"a",(function(){return y}));var r=n(42),s=n(30),o=n(684);var i=n(19),a=n.n(i);const c="auto",u="cn-hangzhou";async function l(t,e,n,r){const i={Action:(null==r?void 0:r.domain)?"Translate":"TranslateGeneral",FormatType:"text",SourceText:t,SourceLanguage:(null==r?void 0:r.source)||c,Scene:(null==r?void 0:r.domain)||"general",TargetLanguage:e},l="/api/translate/web/"+((null==r?void 0:r.domain)?"ecommerce":"general"),d=function(t,e,n,r){const i=Object(s.MD5)(t).toString(s.enc.Base64),a="application/json",c="application/json;charset=UTF-8",u=(new Date).toUTCString(),l=i,d=Object(o.a)(),m=n+"\n"+a+"\n"+l+"\n"+c+"\n"+u+"\nx-acs-signature-method:HMAC-SHA1\nx-acs-signature-nonce:"+d+"\nx-acs-version:2019-01-02\n"+r,h=Object(s.HmacSHA1)(m,e.key).toString(s.enc.Base64);return{Accept:a,"Content-Type":c,"Content-MD5":l,Date:u,Authorization:"acs "+e.id+":"+h,"x-acs-signature-nonce":d,"x-acs-signature-method":"HMAC-SHA1","x-acs-version":"2019-01-02"}}(JSON.stringify(i),n,"POST",l);d["hcfy-Date"]=d.Date,delete d.Date;return(await a.a.post(`https://mt.${(null==r?void 0:r.region)||u}.aliyuncs.com${l}`,i,{headers:d})).data}var d=n(392);class m{constructor(t){this.key=t}translate(t,e,n){return l(t,e,this.key,n)}}class h extends r.a{constructor(t){super(t,d)}isSuccessResponse(t){return function(t){return"200"===t.Code}(t)}getErrorStatus(t){return function(t){return{code:t.Code,message:t.Message}}(t)}isSameLang(t,e){return n=t,r=e.text,n.Data.Translated===r;var n,r}async queryDirect(t,e,n,r,s){if(!s)throw new Error(`调用 ${this.service.name} 接口时出现非预期错误：未提供密钥。`);return new m(s).translate(t,e,{source:n,domain:r})}transform(t,e){const n=t.text,r=t.destination,s={text:n,link:`https://translate.alibaba.com/#hcfy_text=${encodeURIComponent(n)}&hcfy_from=auto&hcfy_to=${r}`,from:t.source&&this.convertToStandard(t.source),to:r&&this.convertToStandard(r)};if(e)try{s.result=e.Data.Translated.split("\n")}catch(t){}return s}}const p={id:"ALiOfficial",name:"阿里翻译",shortName:"阿里",icon:browser.runtime.getURL("alilogo.png"),points:!0,secretKey:{storageKey:"aLiApiKey",keyDocLink:"https://hcfy.limingkai.cn/docs/services/ali-api",idLabel:"AccessKey ID",keyLabel:"AccessKey Secret"},errorCodeDoc:"https://help.aliyun.com/document_detail/158244.html"},f={id:"ALiOfficialDomain",name:"阿里翻译（专业版）",shortName:"阿里(专业版)",icon:browser.runtime.getURL("alilogo.png"),points:!0,domainStorageKey:"aliDomain",errorCodeDoc:"https://help.aliyun.com/document_detail/158267.html"},g=new h(p),y=new h(f)},180:function(t,e,n){"use strict";n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return y})),n.d(e,"a",(function(){return v}));var r=n(42),s=n(49),o=n(393),i=n.n(o);function a(t,e,n){const r=Date.now();return{q:t,appid:e.id,salt:r,sign:i()(e.id+t+r+(n||"")+e.key),domain:n}}var c=n(19),u=n.n(c);function l(t){return!("error_code"in t)}const d="auto";var m=n(192);class h{constructor(t){this.key=t}translate(t,e,n){return async function(t,e,n,r){return(await u.a.post((null==r?void 0:r.domain)?"https://fanyi-api.baidu.com/api/trans/vip/fieldtranslate":"https://fanyi-api.baidu.com/api/trans/vip/translate",Object(s.a)({from:(null==r?void 0:r.source)||d,to:e,...a(t,n,null==r?void 0:r.domain)}))).data}(t,e,this.key,n)}}class p extends r.a{constructor(t){super(t,m)}isSuccessResponse(t){return l(t)}getErrorStatus(t){return function(t){return{code:t.error_code}}(t)}isSameLang(t){return(e=t).from===e.to;var e}async queryDirect(t,e,n,r,s){if(!s)throw new Error(`调用 ${this.service.name} 接口时出现非预期错误：未提供密钥。`);const o=new h(s),i=async s=>{const a=await o.translate(t,e,{source:n,domain:r});return s||l(a)||"54003"!==a.error_code?a:new Promise(((t,e)=>{window.setTimeout((()=>{i(!0).then(t,e)}),800)}))};return i()}transform(t,e){const n=t.text,r=null==e?void 0:e.from,s=null==e?void 0:e.to,o={text:n,link:`https://fanyi.baidu.com/#${r||"auto"}/${s||"zh"}/${encodeURIComponent(n)}`,from:r&&this.convertToStandard(r),to:s&&this.convertToStandard(s)};if(e)try{o.result=e.trans_result.map((t=>t.dst))}catch(t){}return o}}const f={id:"BaiDuWeb",name:"百度翻译",shortName:"百度",icon:browser.runtime.getURL("baidu.ico"),points:!0,secretKey:{storageKey:"baiDuAppKey",keyDocLink:"https://hcfy.limingkai.cn/docs/services/baidu-api",idLabel:"APP ID",keyLabel:"密钥"},errorCodeDoc:"https://fanyi-api.baidu.com/doc/21"},g={id:"BaiDuDomain",name:"百度翻译（专业版）",shortName:"百度(专业版)",icon:browser.runtime.getURL("baidu.ico"),points:!0,domainStorageKey:"baiduDomain",errorCodeDoc:"https://fanyi-api.baidu.com/doc/22"},y=new p(f),v=new p(g)},181:function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return h}));var r=n(30),s=n(681);function o(t,e){const n=new URL(e.url),o=n.hostname,i=o.slice(0,o.indexOf(".")),a=e.method,c="content-type;host",u=a+"\n/\n"+("POST"===a?"":n.search.slice(1))+"\n"+("content-type:application/json\nhost:"+o+"\n")+"\n"+c+"\n"+Object(r.SHA256)(e.bodyString).toString(r.enc.Hex).toLowerCase(),l="TC3-HMAC-SHA256",d=new Date,m=Math.floor(d.getTime()/1e3),h=d.getUTCFullYear()+"-"+Object(s.a)(String(d.getUTCMonth()+1),2,"0")+"-"+Object(s.a)(String(d.getUTCDate()),2,"0"),p=`${h}/${i}/tc3_request`,f=l+"\n"+m+"\n"+p+"\n"+Object(r.SHA256)(u).toString(r.enc.Hex).toLowerCase(),g=t.id,y=t.key,v=Object(r.HmacSHA256)(h,"TC3"+y),b=Object(r.HmacSHA256)(i,v),k=Object(r.HmacSHA256)("tc3_request",b);return{Authorization:l+" Credential="+g+"/"+p+", SignedHeaders="+c+", Signature="+Object(r.HmacSHA256)(f,k).toString(r.enc.Hex),"Content-Type":"application/json","X-TC-Action":"TextTranslate","X-TC-Version":"2018-03-21","X-TC-Timestamp":m,"X-TC-Region":e.region}}var i=n(19),a=n.n(i);const c="auto",u="ap-shanghai";function l(t){return!("Error"in t.Response)}function d(t){return t.Response.Source===t.Response.Target}function m(t){return{code:t.Response.Error.Code,message:t.Response.Error.Message}}async function h(t,e,n,r){let s="https://tmt";(null==r?void 0:r.addRegionInHost)&&(s+=`.${(null==r?void 0:r.region)||u}`),s+=".tencentcloudapi.com";const i=JSON.stringify({SourceText:t,Source:(null==r?void 0:r.source)||c,Target:e,ProjectId:0});return(await a.a.post(s,i,{headers:o(n,{method:"POST",url:s,bodyString:i,region:(null==r?void 0:r.region)||u})})).data}},192:function(t){t.exports=JSON.parse('{"中文(简体)":"zh","英语":"en","日语":"jp","泰语":"th","西班牙语":"spa","阿拉伯语":"ara","法语":"fra","韩语":"kor","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fin","捷克语":"cs","保加利亚语":"bul","丹麦语":"dan","爱沙尼亚语":"est","匈牙利语":"hu","罗马尼亚语":"rom","斯洛文尼亚语":"slo","瑞典语":"swe","越南语":"vie","中文(粤语)":"yue","中文(繁体)":"cht","中文(文言文)":"wyw","南非荷兰语":"afr","阿尔巴尼亚语":"alb","阿姆哈拉语":"amh","亚美尼亚语":"arm","阿萨姆语":"asm","阿斯图里亚斯语":"ast","阿塞拜疆语":"aze","巴斯克语":"baq","白俄罗斯语":"bel","孟加拉语":"ben","波斯尼亚语":"bos","缅甸语":"bur","加泰罗尼亚语":"cat","宿务语":"ceb","克罗地亚语":"hrv","世界语":"epo","法罗语":"fao","菲律宾语":"fil","加利西亚语":"glg","格鲁吉亚语":"geo","古吉拉特语":"guj","豪萨语":"hau","希伯来语":"heb","印地语":"hi","冰岛语":"ice","伊博语":"ibo","印尼语":"id","爱尔兰语":"gle","卡纳达语":"kan","哈萨克语":"kaz","克林贡语":"kli","库尔德语":"kur","老挝语":"lao","拉丁语":"lat","拉脱维亚语":"lav","立陶宛语":"lit","卢森堡语":"ltz","马其顿语":"mac","马尔加什语":"mg","马来语":"may","马拉雅拉姆语":"mal","马耳他语":"mlt","马拉地语":"mar","尼泊尔语":"nep","新挪威语":"nno","波斯语":"per","萨丁尼亚语":"srd","塞尔维亚语":"srp","僧伽罗语":"sin","斯洛伐克语":"sk","索马里语":"som","斯瓦希里语":"swa","他加禄语":"tgl","塔吉克语":"tgk","泰米尔语":"tam","鞑靼语":"tat","泰卢固语":"tel","土耳其语":"tr","土库曼语":"tuk","乌克兰语":"ukr","乌尔都语":"urd","乌兹别克语":"uzb","奥克语":"oci","吉尔吉斯语":"kir","普什图语":"pus","高棉语":"hkm","海地克里奥尔语":"ht","书面挪威语":"nob","旁遮普语":"pan","阿尔及利亚阿拉伯语":"arq","比斯拉马语":"bis","加拿大法语":"frn","哈卡钦语":"hak","胡帕语":"hup","印古什语":"ing","拉特加莱语":"lag","毛里求斯克里奥尔语":"mau","黑山语":"mot","巴西葡萄牙语":"pot","卢森尼亚语":"ruy","塞尔维亚-克罗地亚语":"sec","西里西亚语":"sil","突尼斯阿拉伯语":"tua","亚齐语":"ach","阿肯语":"aka","阿拉贡语":"arg","艾马拉语":"aym","俾路支语":"bal","巴什基尔语":"bak","本巴语":"bem","柏柏尔语":"ber","博杰普尔语":"bho","比林语":"bli","布列塔尼语":"bre","切罗基语":"chr","齐切瓦语":"nya","楚瓦什语":"chv","康瓦尔语":"cor","科西嘉语":"cos","克里克语":"cre","克里米亚鞑靼语":"cri","迪维希语":"div","古英语":"eno","中古法语":"frm","弗留利语":"fri","富拉尼语":"ful","盖尔语":"gla","卢干达语":"lug","古希腊语":"gra","瓜拉尼语":"grn","夏威夷语":"haw","希利盖农语":"hil","伊多语":"ido","因特语":"ina","伊努克提图特语":"iku","爪哇语":"jav","卡拜尔语":"kab","格陵兰语":"kal","卡努里语":"kau","克什米尔语":"kas","卡舒比语":"kah","卢旺达语":"kin","刚果语":"kon","孔卡尼语":"kok","林堡语":"lim","林加拉语":"lin","逻辑语":"loj","低地德语":"log","下索布语":"los","迈蒂利语":"mai","曼克斯语":"glv","毛利语":"mao","马绍尔语":"mah","南恩德贝莱语":"nbl","那不勒斯语":"nea","西非书面语":"nqo","北方萨米语":"sme","挪威语":"nor","奥杰布瓦语":"oji","奥里亚语":"ori","奥罗莫语":"orm","奥塞梯语":"oss","邦板牙语":"pam","帕皮阿门托语":"pap","北索托语":"ped","克丘亚语":"que","罗曼什语":"roh","罗姆语":"ro","萨摩亚语":"sm","梵语":"san","苏格兰语":"sco","掸语":"sha","修纳语":"sna","信德语":"snd","桑海语":"sol","南索托语":"sot","叙利亚语":"syr","德顿语":"tet","提格利尼亚语":"tir","聪加语":"tso","契维语":"twi","高地索布语":"ups","文达语":"ven","瓦隆语":"wln","威尔士语":"wel","西弗里斯语":"fry","沃洛夫语":"wol","科萨语":"xho","意第绪语":"yid","约鲁巴语":"yor","扎扎其语":"zaz","祖鲁语":"zul"}')},193:function(t){t.exports=JSON.parse('{"中文(简体)":"zh-CHS","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fi","捷克语":"cs","保加利亚语":"bg","丹麦语":"da","爱沙尼亚语":"et","匈牙利语":"hu","罗马尼亚语":"ro","斯洛文尼亚语":"sl","瑞典语":"sv","越南语":"vi","中文(粤语)":"yue","中文(繁体)":"zh-CHT","南非荷兰语":"af","孟加拉语":"bn","波斯尼亚语":"bs-Latn","克罗地亚语":"hr","菲律宾语":"fil","希伯来语":"he","印地语":"hi","印尼语":"id","克林贡语":"tlh","拉脱维亚语":"lv","立陶宛语":"lt","马尔加什语":"mg","马来语":"ms","马耳他语":"mt","波斯语":"fa","斯洛伐克语":"sk","斯瓦希里语":"sw","土耳其语":"tr","乌克兰语":"uk","乌尔都语":"ur","海地克里奥尔语":"ht","挪威语":"no","萨摩亚语":"sm","威尔士语":"cy","白苗语":"mww","斐济语":"fj","加泰隆语":"ca","克林贡语(piqaD)":"tlh-Qaak","克雷塔罗奥托米语":"otq","塞尔维亚语(拉丁文)":"sr-Latn","塞尔维亚语(西里尔文)":"sr-Cyrl","汤加语":"to","塔希提语":"ty","尤卡坦玛雅语":"yua"}')},200:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(298),s=n(30);function o(t){const e=Date.now(),n=Math.round(e/1e3),s={timestamp:n,expired:n+10800,nonce:Number(Object(r.a)()),voice_id:[...Array(16)].map((()=>(~~(36*Math.random())).toString(36))).join("")},o=Object.assign(s,t);let i=o.vad_silence_time;return null!=i&&(i<240?i=240:i>2e3&&(i=2e3),o.vad_silence_time=i),o}function i(t,e,n){return new WebSocket("wss://"+function(t,e,n){const r={...e,secretid:n.id},o=`${t}?${Object.keys(r).sort().map((t=>`${t}=${r[t]}`)).join("&")}`;return o+"&signature="+encodeURIComponent(Object(s.HmacSHA1)(o,n.key).toString(s.enc.Base64))}(`asr.cloud.tencent.com/asr/v2/${e}`,n,t))}},215:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u}));var r=n(42),s=n(181),o=n(394),i=n(218);class a extends r.a{constructor(t){super(t,o)}isSuccessResponse(t){return Object(s.d)(t)}getErrorStatus(t){return Object(s.b)(t)}isSameLang(t){return Object(s.c)(t)}async queryDirect(t,e,n,r,s){if(!s)throw new Error(`调用 ${this.service.name} 接口时出现非预期错误：未提供密钥。`);return new i.a(s).translate(t,e,{source:n})}transform(t,e){const n=t.text,r=e&&this.convertToStandard(e.Response.Source),s=e&&this.convertToStandard(e.Response.Target),o={text:n,link:`https://fanyi.qq.com/#hcfy_text=${encodeURIComponent(n)}&hcfy_from=${r||""}&hcfy_to=${s||""}`,from:r,to:s};if(e)try{o.result=e.Response.TargetText.split("\n")}catch(t){}return o}}const c={id:"QQOfficial",name:"腾讯翻译君",shortName:"腾讯",icon:browser.runtime.getURL("qq.ico"),points:!0,secretKey:{storageKey:"qqApiKey",keyDocLink:"https://hcfy.limingkai.cn/docs/services/qq-api",idLabel:"SecretId",keyLabel:"SecretKey"},errorCodeDoc:"https://cloud.tencent.com/document/product/551/30637"},u=new a(c)},218:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(181),s=n(200);class o{constructor(t){this.key=t}translate(t,e,n){return Object(r.a)(t,e,this.key,n)}sstRealtime(t,e){return Object(s.b)(this.key,t,e)}}},219:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return h}));var r=n(31),s=n.n(r),o=n(39),i=n(298),a=n(42),c=n(44);const u=s()("deepL");const l={"中文(简体)":"zh","英语":"en","德语":"de","法语":"fr","西班牙语":"es","葡萄牙语":"pt","意大利语":"it","荷兰语":"nl","波兰语":"pl","俄语":"ru","日语":"ja","爱沙尼亚语":"et","保加利亚语":"bg","丹麦语":"da","芬兰语":"fi","捷克语":"cs","拉脱维亚语":"lv","立陶宛语":"lt","罗马尼亚语":"ro","瑞典语":"sv","斯洛伐克语":"sk","斯洛文尼亚语":"sl","希腊语":"el","匈牙利语":"hu"};class d extends a.a{constructor(t){super(t,l),this.frame=null,this.frameReady=null,this.frameDestroyTid=null,this.msgMap=new Map,window.addEventListener("message",(t=>{const e=Object(o.a)(t.data);if(e){if("HCFY_DEEPL_CANCEL"===(null==(n=e)?void 0:n.type)){u("收到 iframe 传回来的取消翻译的消息：",e);const t=this.msgMap.get(e.id);if(!t)return;return this.msgMap.delete(e.id),void t.reject(new c.a({type:"API_SERVER_ERROR",message:"DeepL 只能同时处理一次查询。由于你触发了一次新的查询，所以此次未完成的查询被取消了。"}))}var n;if(function(t){return"HCFY_DEEPL_ERROR"===(null==t?void 0:t.type)}(e)){u("收到 iframe 传回来的翻译出错的消息：",e);const t=this.msgMap.get(e.id);if(!t)return;return this.msgMap.delete(e.id),void t.reject(new c.a({type:"API_SERVER_ERROR",message:"翻译时出错了，错误消息："+e.message}))}if(function(t){return"HCFY_DEEPL_RETURN_RESULT"===(null==t?void 0:t.type)}(e)){u("收到 iframe 传回来的翻译结果消息：",e);const t=this.msgMap.get(e.id);if(!t)return;this.msgMap.delete(e.id),t.resolve(e)}}}))}initFrame(){const t=this.frame=document.createElement("iframe");return t.src="https://www.deepl.com/translator",t.style.display="none",this.frameReady=new Promise(((e,n)=>{t.onload=()=>{u("iframe 加载完毕"),e(t.contentWindow)},t.onerror=()=>{this.destroyFrame(),n()}})),document.body.appendChild(t),this.frameReady}resetFrameDestroyCounter(){null!=this.frameDestroyTid&&window.clearTimeout(this.frameDestroyTid),this.frameDestroyTid=window.setTimeout((()=>{this.destroyFrame()}),6e4)}destroyFrame(){this.frame&&(document.body.removeChild(this.frame),this.frame=null),null!=this.frameDestroyTid&&(window.clearTimeout(this.frameDestroyTid),this.frameDestroyTid=null),this.frameReady=null}isSameLang(t,e){return e.text===t.result}async queryDirect(t,e,n="auto"){u("调用翻译方法，三个参数为：",t,e,n);const r=await(this.frameReady||this.initFrame());return this.resetFrameDestroyCounter(),new Promise(((s,a)=>{const c=Object(i.a)(),l={type:"HCFY_DEEPL_TEANSLATE_MESSAGE",id:c,from:n,to:e,text:t};u("通知 iframe 进行翻译，消息体为：",l),r.postMessage(Object(o.b)(l),"*"),this.msgMap.set(c,{resolve:s,reject:a})}))}transform(t,e){const n=(null==e?void 0:e.hash)||"",[r,s,o]=n.slice(1).split("/"),i={text:decodeURIComponent(o),from:this.convertToStandard(r),to:this.convertToStandard(s),link:"https://www.deepl.com/translator"+n};if(e){const t=e.result.split("\n");e.otherResults.length?i.dict=[{terms:t},{terms:e.otherResults}]:i.result=t}return u("生成最终翻译结果对象：",i),i}}const m={id:"DeepLWeb",name:"DeepL",shortName:"DeepL",icon:browser.runtime.getURL("deepl.png")},h=new d(m)},244:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return p}));var r=n(42),s=n(30);function o(t,e){const n=String(Date.now());return{pid:t.id,salt:n,sign:Object(s.MD5)(t.id+e+n+t.key).toString(s.enc.Hex)}}var i=n(19),a=n.n(i),c=n(49);const u="auto";var l=n(193);class d{constructor(t){this.key=t}translate(t,e,n){return async function(t,e,n,r){const s={q:t,from:(null==r?void 0:r.source)||u,to:e,dict:"true",...o(n,t)};return(await a.a.post("https://fanyi.sogou.com/reventondc/api/sogouTranslate",Object(c.a)(s))).data}(t,e,this.key,n)}}class m extends r.a{constructor(t){super(t,l)}isSuccessResponse(t){return function(t){return"0"===t.errorCode}(t)}getErrorStatus(t){return function(t){return{code:t.errorCode,message:t.message}}(t)}isSameLang(t,e){return!!e.destination&&(n=t,r=e.destination,n.detect===r);var n,r}async queryDirect(t,e,n,r,s){if(!s)throw new Error(`调用 ${this.service.name} 接口时出现非预期错误：未提供密钥。`);return new d(s).translate(t,e,{source:n})}transform(t,e){var n,r;const s=t.text,o=t.destination,i={text:s,link:`https://fanyi.sogou.com/text?keyword=${encodeURIComponent(s)}&transfrom=${(null==e?void 0:e.detect)||"auto"}&transto=${o||"zh-CHS"}&model=general`,from:e&&this.convertToStandard(e.detect),to:o&&this.convertToStandard(o)};if(e){try{const t=null===(n=e.phonetic)||void 0===n?void 0:n.map((t=>({name:"uk"===t.type?"英":"usa"===t.type?"美":void 0,ttsURI:t.filename,value:t.text})));(null==t?void 0:t.length)&&(i.phonetic=t)}catch(t){}try{i.dict=null===(r=e.usual)||void 0===r?void 0:r.map((t=>({pos:t.pos,terms:t.values})))}catch(t){}try{i.result=e.translation.split("\n")}catch(t){}}return i}}const h={id:"SoGouOfficial",name:"搜狗翻译",shortName:"搜狗",icon:browser.runtime.getURL("sogou.ico"),points:!0,secretKey:{storageKey:"soGouApiKey",keyDocLink:"https://hcfy.limingkai.cn/docs/services/sg-api",idLabel:"PID",keyLabel:"Key"},errorCodeDoc:"https://deepi.sogou.com/doccenter/texttranslatedoc"},p=new m(h)},245:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return f}));var r=n(42),s=n(30);function o(t){const e=t.length;return e<=20?t:t.substring(0,10)+e+t.substring(e-10,e)}function i(t,e){const n=Date.now(),r=Math.round(n/1e3);return{q:t,appKey:e.id,salt:n,sign:Object(s.SHA256)(e.id+o(t)+n+r+e.key).toString(s.enc.Hex),signType:"v3",curtime:r}}var a=n(19),c=n.n(a),u=n(49);const l="auto";var d=n(395);class m{constructor(t){this.key=t}translate(t,e,n){return async function(t,e,n,r){return(await c.a.post("https://openapi.youdao.com/api",Object(u.a)({from:(null==r?void 0:r.source)||l,to:e,...await i(t,n)}))).data}(t,e,this.key,n)}}class h extends r.a{constructor(t){super(t,d)}isSuccessResponse(t){return function(t){return"0"===t.errorCode}(t)}getErrorStatus(t){return function(t){return{code:t.errorCode}}(t)}isSameLang(t){return function(t){const[e,n]=t.l.split("2");return e===n}(t)}async queryDirect(t,e,n,r,s){if(!s)throw new Error(`调用 ${this.service.name} 接口时出现非预期错误：未提供密钥。`);return new m(s).translate(t,e,{source:n})}transform(t,e){var n;const r=t.text,[s,o]=((null==e?void 0:e.l)||"").split("2"),i=null==e?void 0:e.dict,a={text:r,from:this.convertToStandard(s),to:this.convertToStandard(o),ttsURI:null==e?void 0:e.speakUrl,link:i?`https://dict.youdao.com/search?q=${encodeURIComponent(r)}`:`http://fanyi.youdao.com/translate?i=${encodeURIComponent(r)}`,result:null===(n=null==e?void 0:e.translation[0])||void 0===n?void 0:n.split("\n")};if(null==e?void 0:e.basic){a.dict=e.basic.explains.map((t=>{const e=t.match(/^([a-z]+\.)\s+/);return{pos:e?e[1]:void 0,terms:[e?t.slice(e[0].length):t]}}));const t=[];e.basic["us-phonetic"]&&t.push({name:"美",value:e.basic["us-phonetic"],ttsURI:e.basic["us-speech"]}),e.basic["uk-phonetic"]&&t.push({name:"英",value:e.basic["uk-phonetic"],ttsURI:e.basic["uk-speech"]}),!t.length&&e.basic.phonetic&&t.push({value:e.basic.phonetic,ttsURI:e.speakUrl}),t.length&&(a.phonetic=t)}return a}}const p={id:"YouDaoWeb",name:"有道翻译",shortName:"有道",icon:browser.runtime.getURL("youdao.ico"),points:!0,secretKey:{storageKey:"youDaoAppKey",keyDocLink:"https://hcfy.limingkai.cn/docs/services/youdao-api",idLabel:"应用 ID",keyLabel:"应用密钥"},errorCodeDoc:"https://ai.youdao.com/DOCSIRMA/html/%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E7%BF%BB%E8%AF%91/API%E6%96%87%E6%A1%A3/%E6%96%87%E6%9C%AC%E7%BF%BB%E8%AF%91%E6%9C%8D%E5%8A%A1/%E6%96%87%E6%9C%AC%E7%BF%BB%E8%AF%91%E6%9C%8D%E5%8A%A1-API%E6%96%87%E6%A1%A3.html"},f=new h(p)},248:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n(42),s=n(19),o=n.n(s);const i="auto";class a{constructor(t){this.key=t}translate(t,e,n){return async function(t,e,n,r){const s={source:t.split("\n"),trans_type:`${(null==r?void 0:r.source)||i}2${e}`,detect:!0};return(await o.a.post("https://api.interpreter.caiyunai.com/v1/translator",s,{headers:{"X-Authorization":`token ${n}`}})).data}(t,e,this.key,n)}}class c extends r.a{constructor(t){super(t,{"中文(简体)":"zh","英语":"en","日语":"ja"})}isSameLang(t,e){return n=t,r=e.text,n.target.join("\n")===r;var n,r}async queryDirect(t,e,n,r,s){if(!s)throw new Error(`调用 ${this.service.name} 接口时出现非预期错误：未提供密钥。`);return new a(s.key).translate(t,e,{source:n})}transform(t,e){const n=t.text,r=t.destination,s={text:n,link:"https://fanyi.caiyunapp.com/",from:t.source&&this.convertToStandard(t.source),to:r&&this.convertToStandard(r)};return e&&(s.result=e.target.filter((t=>t.trim()))),s}}const u={id:"CaiYunOfficial",name:"彩云小译",shortName:"彩云",icon:browser.runtime.getURL("xiaoyilogo.png"),points:!0,secretKey:{storageKey:"cyApiToken",keyDocLink:"https://hcfy.limingkai.cn/docs/services/caiyun-api",keyLabel:"Token"}},l=new c(u)},26:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return l}));const r=window.navigator.userAgent,s=r.includes("Mac"),o=r.includes("Edg"),i=!o&&r.includes("Chrome");function a(t){return t.split(".").map((t=>Number(t)))}const c=a(browser.runtime.getManifest().version);function u(t,e){const n="string"==typeof t?a(t):t,r="string"==typeof e?a(e):e,s=Math.max(n.length,r.length);for(let t=0;t<s;t++){const e=n[t]||0,s=r[t]||0;if(e<s)return-1;if(e>s)return 1}return 0}function l(t){return u(t,c)}},3:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}));const r={button:!0,buttonAutoClose:!1,disableInTextarea:!1,domainBlackList:[],domainWhiteList:[],textList:[{name:"忽略中文",readonly:!0,enabled:!1,value:"[\\u4e00-\\u9fa5]",description:"如果划选的文本当中包含中文，则不显示翻译按钮或翻译结果。"},{name:"忽略字符",readonly:!0,enabled:!0,value:"^[\\s.\\-0-9()•+]+$",description:"如果划选的文本全部都是由数字、点、括号、空格、横线、加号和圆点（即 •，多用于密码框）组成的，则不显示翻译按钮或翻译结果。"}],placement:"bottom",pin:!1,pinPos:null,pinIgnoreDomainList:!0,darkMode:"system",pdfAuto:!0,width:250,destination:"中文(简体)",secondDestination:"英语",showTextArea:!1,textAreaAuto:!1,selectedAPIs:["GoogleWeb","DeepLWeb","BingDictWeb"],collapsedAPIs:[],selectedExternalLinks:[],autoClipboard:!0,autoPlay:!1,autoCopy:!1,recentUseLangFrom:[""],recentUseLangTo:["中文(简体)"],tipPanelSettingsClosed:!1,tipBlockedPDFClosed:!1,tipIncognitoPDFClosed:!1,tipOcrChangeClosed:!0,tipForeverVIPClosed:!0,tipQuickLinksClosed:!1,tipNewProfessionalClosed:!1,tipTextareaBtnClosed:!0,tipForSTTClosed:!1,panelPos:{width:270,height:500,left:100,top:100},panelSize:"small",panelCustomStyle:"",notifySyncOptions:!0,sourceTransformNoBr:!1,sourceTransformNCaml:!1,sourceTransformNoComment:!1,historyEnabled:!1,favoritesEnabled:!0,modifierKeys:[],modifierKeyPressedAction:"",modifierKeyTranslate:!1,modifierKeyLink:!1,audioVolume:100,audioRate:1,systemTTS:"aid",systemTTSAccent:{},systemTTSVoice:{},localOCR:{lang:"eng"},pageTrsApi:"GoogleWeb",googleRegion:"cn",quickLinks:[{name:"谷歌搜索",link:"https://www.google.com/search?q=%s",menu:!1,panel:!0},{name:"维基百科",link:"https://zh.wikipedia.org/w/index.php?search=%s",menu:!1,panel:!0},{name:"剑桥词典",link:"https://dictionary.cambridge.org/dictionary/english-chinese-simplified/%s",menu:!1,panel:!0}],noticesRead:[],customAPI:"",customAPINames:[],pointsEnabled:[],baiduDomain:null,aliDomain:null,ocrService:"tesseractocr"},s={user:null,optionsSyncAt:null,disabledNofiByBrowserUI:!1,favoritesSyncAt:null,historiesSyncAt:null,baiDuAppKey:{id:"",key:""},baiDuOCRKey:{key:"",secret:"",legacy:!1},youDaoAppKey:{id:"",key:""},aLiApiKey:{id:"",key:""},qqApiKey:{id:"",key:""},soGouApiKey:{id:"",key:""},cyApiToken:"",ocrLimit:{date:0,times:0},pageTranslateLimit:{date:0,times:0},sttLimit:{date:0,times:0},videoLimit:{date:0,times:0},pdfZoom:"",noticesUnreadNum:0,noticesFiltered:[]}},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(183);const s=[];function o(t,e,n,r="local"){return browser.storage[r].get(t).then((t=>{(n||e)(t,!0)})).then((()=>{const n=Object.keys(t);s.push({defaultOptions:t,onChange:e,area:r,keys:n})})),()=>{const n=s.findIndex((n=>n.onChange===e&&n.area===r&&n.defaultOptions===t));return n>=0&&(s.splice(n,1),!0)}}browser.storage.onChanged.addListener(((t,e)=>{s.forEach((n=>{if(n.area!==e)return;const s=function(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&e.includes(r)&&(n[r]=t[r].newValue);return n}(t,n.keys);Object(r.a)(s)||n.onChange(s)}))}))},39:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));const r="greetings from hcfy:",s=r.length;function o(t){return r+JSON.stringify(t)}function i(t){try{if(t.startsWith(r))return JSON.parse(t.slice(s))}catch(t){}return null}},392:function(t){t.exports=JSON.parse('{"中文(简体)":"zh","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","荷兰语":"nl","波兰语":"pl","芬兰语":"fi","捷克语":"cs","保加利亚语":"bg","丹麦语":"da","爱沙尼亚语":"et","匈牙利语":"hu","罗马尼亚语":"ro","斯洛文尼亚语":"sl","瑞典语":"sv","越南语":"vi","中文(粤语)":"yue","中文(繁体)":"zh-tw","南非荷兰语":"af","阿尔巴尼亚语":"sq","阿姆哈拉语":"am","亚美尼亚语":"hy","阿萨姆语":"as","阿斯图里亚斯语":"ast","阿塞拜疆语":"az","巴斯克语":"eu","白俄罗斯语":"be","孟加拉语":"bn","波斯尼亚语":"bs","缅甸语":"my","加泰罗尼亚语":"ca","宿务语":"ceb","克罗地亚语":"hbs","世界语":"eo","法罗语":"fo","菲律宾语":"fil","加利西亚语":"gl","格鲁吉亚语":"ka","古吉拉特语":"gu","豪萨语":"ha","希伯来语":"he","印地语":"hi","冰岛语":"is","伊博语":"ig","印尼语":"id","爱尔兰语":"ga","卡纳达语":"kn","哈萨克语":"kk","克林贡语":"tlh","库尔德语":"ku","老挝语":"lo","拉丁语":"la","拉脱维亚语":"lv","立陶宛语":"lt","卢森堡语":"lb","马其顿语":"mk","马尔加什语":"mg","马来语":"ms","马拉雅拉姆语":"ml","马耳他语":"mt","马拉地语":"mr","尼泊尔语":"ne","波斯语":"fa","僧伽罗语":"si","索马里语":"so","斯瓦希里语":"sw","他加禄语":"tl","塔吉克语":"tg","泰米尔语":"ta","鞑靼语":"tt","泰卢固语":"te","土耳其语":"tr","土库曼语":"tk","乌尔都语":"ur","乌兹别克语":"uz","奥克语":"oc","吉尔吉斯语":"ky","普什图语":"ps","高棉语":"km","海地克里奥尔语":"ht","旁遮普语":"pa","比斯拉马语":"bi","胡帕语":"hup","印古什语":"inh","拉特加莱语":"ltg","毛里求斯克里奥尔语":"mfe","黑山语":"cnr","卢森尼亚语":"rue","西里西亚语":"szl","亚齐语":"ace","阿肯语":"ak","阿拉贡语":"an","艾马拉语":"ay","俾路支语":"bal","巴什基尔语":"ba","本巴语":"bem","柏柏尔语":"ber","博杰普尔语":"bho","比林语":"byn","布列塔尼语":"br","切罗基语":"chr","齐切瓦语":"ny","楚瓦什语":"cv","科西嘉语":"co","克里克语":"mus","克里米亚鞑靼语":"crh","弗留利语":"fur","卢干达语":"lg","瓜拉尼语":"gn","夏威夷语":"haw","希利盖农语":"hil","伊多语":"io","因特语":"ia","伊努克提图特语":"iu","爪哇语":"jv","卡拜尔语":"kab","格陵兰语":"kl","卡努里语":"kr","克什米尔语":"ks","卡舒比语":"csb","卢旺达语":"rw","刚果语":"kg","林堡语":"li","林加拉语":"ln","逻辑语":"jbo","低地德语":"nds","迈蒂利语":"mai","毛利语":"mi","马绍尔语":"mh","挪威语":"no","奥杰布瓦语":"oj","奥里亚语":"or","奥罗莫语":"om","奥塞梯语":"os","帕皮阿门托语":"pap","克丘亚语":"qu","罗曼什语":"rm","罗姆语":"rom","萨摩亚语":"sm","梵语":"sa","苏格兰语":"sco","掸语":"shn","修纳语":"sn","信德语":"sd","叙利亚语":"syr","德顿语":"tet","提格利尼亚语":"ti","聪加语":"ts","契维语":"tw","文达语":"ve","瓦隆语":"wa","威尔士语":"cy","沃洛夫语":"wo","科萨语":"xh","意第绪语":"yi","约鲁巴语":"yo","扎扎其语":"zza","祖鲁语":"zu","弗里西语":"fy","蒙古语":"mn","苗语":"hmn","印尼巽他语":"su","斐济语":"fj","汤加语":"to","塔希提语":"ty","阿布哈兹语":"ab","阿兹特克语":"nch","埃维语":"ee","巴布亚皮钦语":"tpi","班巴拉语":"bm","邦阿西楠语":"pag","北萨米语":"se","查莫罗语":"ch","查瓦卡诺语":"cbk","迪维西语":"dv","侗语":"kdx","杜順語":"dtp","富尔语":"fvr","格雷罗纳瓦特尔语":"ngu","格罗宁根方言":"gos","基里巴斯语":"gil","基隆迪语":"rn","基切语":"quc","卡西语":"kha","康沃尔语":"kw","马恩语":"gv","马里语（俄罗斯）":"chm","玛雅语":"kek","姆班杜语":"umb","纳瓦霍语":"nv","纽埃语":"niu","帕姆语":"pmn","桑戈语":"sg","上索布语":"hsb","汤加语(赞比亚)":"toi","图瓦卢语":"tvl","图瓦语":"tyv","瓦瑞语(菲律宾)":"war","沃拉普克语":"vo","乌德穆尔特语":"udm","西方国际语":"ie","现代希腊语":"el","新共同语言":"lfn","伊班语":"iba","伊洛卡诺语":"ilo"}')},394:function(t){t.exports=JSON.parse('{"中文(简体)":"zh","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","越南语":"vi","中文(繁体)":"zh-TW","印地语":"hi","印尼语":"id","马来语":"ms","土耳其语":"tr"}')},395:function(t){t.exports=JSON.parse('{"中文(简体)":"zh-CHS","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fi","捷克语":"cs","保加利亚语":"bg","丹麦语":"da","爱沙尼亚语":"et","匈牙利语":"hu","罗马尼亚语":"ro","斯洛文尼亚语":"sl","瑞典语":"sv","越南语":"vi","中文(粤语)":"yue","南非荷兰语":"af","阿尔巴尼亚语":"sq","阿姆哈拉语":"am","亚美尼亚语":"hy","阿塞拜疆语":"az","巴斯克语":"eu","白俄罗斯语":"be","孟加拉语":"bn","波斯尼亚语":"bs","缅甸语":"my","加泰罗尼亚语":"ca","宿务语":"ceb","克罗地亚语":"hr","世界语":"eo","菲律宾语":"tl","加利西亚语":"gl","格鲁吉亚语":"ka","古吉拉特语":"gu","豪萨语":"ha","希伯来语":"he","印地语":"hi","冰岛语":"is","伊博语":"ig","印尼语":"id","爱尔兰语":"ga","卡纳达语":"kn","哈萨克语":"kk","克林贡语":"tlh","库尔德语":"ku","老挝语":"lo","拉丁语":"la","拉脱维亚语":"lv","立陶宛语":"lt","卢森堡语":"lb","马其顿语":"mk","马尔加什语":"mg","马来语":"ms","马拉雅拉姆语":"ml","马耳他语":"mt","马拉地语":"mr","尼泊尔语":"ne","波斯语":"fa","僧伽罗语":"si","斯洛伐克语":"sk","索马里语":"so","斯瓦希里语":"sw","塔吉克语":"tg","泰米尔语":"ta","泰卢固语":"te","土耳其语":"tr","乌克兰语":"uk","乌尔都语":"ur","乌兹别克语":"uz","吉尔吉斯语":"ky","普什图语":"ps","高棉语":"km","海地克里奥尔语":"ht","旁遮普语":"pa","齐切瓦语":"ny","科西嘉语":"co","夏威夷语":"haw","爪哇语":"jw","毛利语":"mi","挪威语":"no","萨摩亚语":"sm","修纳语":"sn","信德语":"sd","威尔士语":"cy","意第绪语":"yi","约鲁巴语":"yo","祖鲁语":"zu","弗里西语":"fy","蒙古语":"mn","南非科萨语":"xh","塞索托语":"st","苏格兰盖尔语":"gd","印尼巽他语":"su","白苗语":"mww","斐济语":"fj","克雷塔罗奥托米语":"otq","塞尔维亚语(拉丁文)":"sr-Latn","塞尔维亚语(西里尔文)":"sr-Cyrl","汤加语":"to","塔希提语":"ty","尤卡坦玛雅语":"yua"}')},396:function(t){t.exports=JSON.parse('{"中文(简体)":"zh-CN","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fi","捷克语":"cs","保加利亚语":"bg","丹麦语":"da","爱沙尼亚语":"et","匈牙利语":"hu","罗马尼亚语":"ro","斯洛文尼亚语":"sl","瑞典语":"sv","越南语":"vi","中文(繁体)":"zh-TW","南非荷兰语":"af","阿尔巴尼亚语":"sq","阿姆哈拉语":"am","亚美尼亚语":"hy","阿塞拜疆语":"az","巴斯克语":"eu","白俄罗斯语":"be","孟加拉语":"bn","波斯尼亚语":"bs","缅甸语":"my","加泰罗尼亚语":"ca","宿务语":"ceb","克罗地亚语":"hr","世界语":"eo","菲律宾语":"tl","加利西亚语":"gl","格鲁吉亚语":"ka","古吉拉特语":"gu","豪萨语":"ha","希伯来语":"iw","印地语":"hi","冰岛语":"is","伊博语":"ig","印尼语":"id","爱尔兰语":"ga","卡纳达语":"kn","哈萨克语":"kk","库尔德语":"ku","老挝语":"lo","拉丁语":"la","拉脱维亚语":"lv","立陶宛语":"lt","卢森堡语":"lb","马其顿语":"mk","马尔加什语":"mg","马来语":"ms","马拉雅拉姆语":"ml","马耳他语":"mt","马拉地语":"mr","尼泊尔语":"ne","波斯语":"fa","塞尔维亚语":"sr","僧伽罗语":"si","斯洛伐克语":"sk","索马里语":"so","斯瓦希里语":"sw","塔吉克语":"tg","泰米尔语":"ta","鞑靼语":"tt","泰卢固语":"te","土耳其语":"tr","土库曼语":"tk","乌克兰语":"uk","乌尔都语":"ur","乌兹别克语":"uz","吉尔吉斯语":"ky","普什图语":"ps","高棉语":"km","海地克里奥尔语":"ht","旁遮普语":"pa","齐切瓦语":"ny","科西嘉语":"co","夏威夷语":"haw","爪哇语":"jw","卢旺达语":"rw","毛利语":"mi","挪威语":"no","奥里亚语":"or","萨摩亚语":"sm","修纳语":"sn","信德语":"sd","威尔士语":"cy","意第绪语":"yi","约鲁巴语":"yo","祖鲁语":"zu","弗里西语":"fy","蒙古语":"mn","苗语":"hmn","南非科萨语":"xh","塞索托语":"st","苏格兰盖尔语":"gd","维吾尔语":"ug","印尼巽他语":"su"}')},42:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(85),s=n(415),o=n(61),i=n(15),a=n(44);const c={zh:"中文(简体)","zh-TW":"中文(繁体)",en:"英语",da:"丹麦语",nl:"荷兰语",fi:"芬兰语",fr:"法语",de:"德语",he:"希伯来语",it:"意大利语",ja:"日语",ko:"韩语",no:"挪威语",pl:"波兰语",pt:"葡萄牙语","pt-PT":"葡萄牙语","pt-BR":"巴西葡萄牙语",ru:"俄语",es:"西班牙语",sv:"瑞典语",cs:"捷克语",el:"希腊语",is:"冰岛语",lv:"拉脱维亚语",lt:"立陶宛语",ro:"罗马尼亚语",hu:"匈牙利语",et:"爱沙尼亚语",bg:"保加利亚语",hr:"克罗地亚语",sr:"塞尔维亚语",ga:"爱尔兰语",gl:"加利西亚语",fil:"他加禄语",tr:"土耳其语",uk:"乌克兰语",hi:"印地语",mk:"马其顿语",bn:"孟加拉语",id:"印尼语",la:"拉丁语",ms:"马来语",ml:"马拉雅拉姆语",cy:"威尔士语",ne:"尼泊尔语",te:"泰卢固语",sq:"阿尔巴尼亚语",ta:"泰米尔语",be:"白俄罗斯语",jw:"爪哇语",oc:"奥克语",ur:"乌尔都语",bh:void 0,gu:"古吉拉特语",th:"泰语",ar:"阿拉伯语",ca:"加泰罗尼亚语",eo:"世界语",eu:"巴斯克语",ia:"因特语",kn:"卡纳达语",pa:"旁遮普语",gd:"苏格兰盖尔语",sw:"斯瓦希里语",sl:"斯洛文尼亚语",mr:"马拉地语",mt:"马耳他语",vi:"越南语",fy:"弗里西语",sk:"斯洛伐克语",fo:"法罗语",su:"印尼巽他语",uz:"乌兹别克语",am:"阿姆哈拉语",az:"阿塞拜疆语",ka:"格鲁吉亚语",ti:"提格利尼亚语",fa:"波斯语",bs:"波斯尼亚语",si:"僧伽罗语",nn:"新挪威语",xh:"科萨语",zu:"祖鲁语",gn:"瓜拉尼语",st:"塞索托语",tk:"土库曼语",ky:"吉尔吉斯语",br:"布列塔尼语",tw:"契维语",yi:"意第绪语",sh:"塞尔维亚-克罗地亚语",so:"索马里语",ug:"维吾尔语",ku:"库尔德语",mn:"蒙古语",hy:"亚美尼亚语",lo:"老挝语",sd:"信德语",rm:"罗曼什语",af:"南非荷兰语",lb:"卢森堡语",my:"缅甸语",km:"高棉语",bo:void 0,dv:"迪维西语",chr:"切罗基语",syr:"叙利亚语","sit-NP":void 0,or:"奥里亚语",as:"阿萨姆语",co:"科西嘉语",ie:"西方国际语",kk:"哈萨克语",ln:"林加拉语",mo:void 0,ps:"普什图语",qu:"克丘亚语",sn:"修纳语",tg:"塔吉克语",tt:"鞑靼语",to:"汤加语",yo:"约鲁巴语",cpe:void 0,cpf:void 0,cpp:void 0,crp:void 0,mi:"毛利语",wo:"沃洛夫语",ab:"阿布哈兹语",aa:void 0,ay:"艾马拉语",ba:"巴什基尔语",bi:"比斯拉马语",dz:void 0,fj:"斐济语",kl:"格陵兰语",ha:"豪萨语",ht:"海地克里奥尔语",ik:void 0,iu:"伊努克提图特语",ks:"克什米尔语",rw:"卢旺达语",mg:"马尔加什语",na:void 0,om:"奥罗莫语",rn:"基隆迪语",sm:"萨摩亚语",sg:"桑戈语",sa:"梵语",ss:void 0,ts:"聪加语",tn:void 0,vo:"沃拉普克语",za:void 0,kha:"卡西语",sco:"苏格兰语",lg:"卢干达语",gv:"马恩语","sr-ME":void 0};var u=n(70);class l extends a.a{constructor(t,e){super(t),this.context=e}}class d extends r.a{constructor(t,e,n){super(t),this.standardMap=e,this.customMap=e&&Object(s.a)(e),this.noRetry=n}convertToStandard(t){return this.customMap?this.customMap[t]:t}convertToCustom(t){return this.standardMap?this.standardMap[t]:t}isSameLang(t,e){return!1}isSuccessResponse(t){return!0}getErrorStatus(t){}buildAPIErrorMessage(t){const e=this.service,n=this.getErrorStatus(t);let r=`${e.name}报错了`;return(null==n?void 0:n.code)&&(r+=`，错误码：“${n.code}”`),(null==n?void 0:n.message)&&(r+=`，错误消息：“${n.message}”`),e.errorCodeDoc&&(r+=`，请<a href="${e.errorCodeDoc}" target="_blank" rel="noreferrer">点击这里</a>查看原因`),r+="。",r}async queryFromHCFY(t,e,n,r){return(await i.a.post("/translate",{api:this.service.id,text:t,destination:e,source:n,domain:r})).data.serverResponse}normalizeText(t){return t.split("\n").map((t=>t.trim())).filter(o.a).join("\n")}async convertLanguages(t,e,n){let r;n&&(r=this.convertToCustom(n));const s=[];e.some((t=>{const e=this.convertToCustom(t);if(e)return 2===s.push(e)}));let o=0,i=r;return i||(i=await async function(t){var e;const n=null===(e=(await browser.i18n.detectLanguage(t)).languages[0])||void 0===e?void 0:e.language;if(n)return c[n]}(t),i&&(i=this.convertToCustom(i))),i===s[0]&&s.length>1&&(o=1),{customSource:r,detectSource:i,customDestinations:s,startIndex:o}}async translateInner(t,e,n){const s=this.normalizeText(t),o={text:t,normalizedText:s},{customSource:c,customDestinations:d,startIndex:m}=await this.convertLanguages(s,e,n);if(o.source=c,o.destination=d[m],n&&!c)throw new l({type:"UNSUPPORTED_LANGUAGE",message:`${this.service.name}不支持翻译语种为${n}的文本。`},o);if(!d.length)throw new l({type:"UNSUPPORTED_LANGUAGE",message:this.service.name+"不支持将文本翻译为这些语种："+e.join("，")+"。"},o);let h;if(this.service.domainStorageKey&&(h=(await browser.storage.local.get(this.service.domainStorageKey))[this.service.domainStorageKey],!h))throw new l({type:"NEED_DOMAIN",message:`请先选择${this.service.name}的专业领域。`},o);o.domain=h;const p=await this.getCallType();if(!p.ok)throw new l({type:p.reason,message:p.message},o);const f=async(t,n)=>{let m;o.destination=d[t];try{switch(p.type){case 2:case 1:m=await(this.noRetry?this.queryDirect(s,d[t],c,h,p.secretKeyInStorage?Object(r.b)(p.secretKeyInStorage):void 0):Object(u.a)((()=>this.queryDirect(s,d[t],c,h,p.secretKeyInStorage?Object(r.b)(p.secretKeyInStorage):void 0))));break;case 0:m=await this.queryFromHCFY(s,d[t],c,h)}}catch(t){if(Object(i.c)(t))throw new l({type:"OTHER",message:"划词翻译服务器返回了一个错误："+(Array.isArray(t.message)?t.message.join("；"):t.message)},o);if(Object(i.b)(t)){const e=Object(a.b)(t);throw new l({type:e.type,message:e.message},o)}if(t instanceof a.a)throw new l({type:t.type,message:t.message},o);throw new l(`发生了一个错误，错误信息：${(null==t?void 0:t.message)||"未知错误"} `,o)}if(!n&&this.isSuccessResponse(m)&&this.isSameLang(m,o)){if(0!==t)return f(0,!0);if(e.length>1)return f(1,!0)}return{raw:m,context:o}};return f(m,!1)}getTTS(t,e){throw new a.a({type:"OTHER",message:this.service.name+"不支持语音朗读。"})}translate(t,e,n){return this.translateInner(t,e,n).then((({raw:t,context:e})=>{if(this.isSuccessResponse(t))return this.transform(e,t);{const n=this.transform(e);return n.error=new a.a({type:"API_SERVER_ERROR",message:this.buildAPIErrorMessage(t)}).toJSON(),n}}),(t=>{if(t instanceof l){const e=this.transform(t.context);return e.error=t.toJSON(),e}return Promise.reject(t)}))}}},44:function(t,e,n){"use strict";function r(t){return t.response?new s({type:"API_SERVER_ERROR",message:"服务器返回了错误的 HTTP 响应码："+t.response.status,axiosError:t}):t.request?new s({type:"NETWORK_ERROR",message:"服务器没有响应，请检查您的网络是否畅通。",axiosError:t}):new s({type:"OTHER",message:`未知错误，错误消息为：${t.message}`,axiosError:t})}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s}));class s extends Error{constructor(t){"string"==typeof t&&(t={message:t}),super(t.message||"出错了，请稍后重试。"),this.type=t.type||"OTHER",this.axiosError=t.axiosError}toJSON(){return{type:this.type,message:this.message}}}},469:function(t,e){},471:function(t,e){},481:function(t,e){},483:function(t,e){},49:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(255);function s(t){const e=[];return Object(r.a)(t,((t,n)=>{const r=[].concat(t);e.push(...r.map((t=>`${n}=${encodeURIComponent(t)}`)))})),e.join("&")}},510:function(t,e){},511:function(t,e){},516:function(t,e){},518:function(t,e){},525:function(t,e){},544:function(t,e){},70:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o}));const r={delay:0,count:3,beforeRetry:()=>!1};function s(t,e){const n=e?Object.assign({},r,e):r;let s=0;const o=()=>t().catch((t=>s<n.count&&(s+=1,!n.beforeRetry(t))?new Promise(((t,e)=>{window.setTimeout((()=>{o().then(t,e)}),n.delay)})):Promise.reject(t)));return o()}function o(t,e){return s((()=>new Promise(((e,n)=>{try{e(t())}catch(t){n(t)}}))),e)}},85:function(t,e,n){"use strict";function r(t){return"string"==typeof t?{id:"",key:t}:"secret"in t?{id:t.key,key:t.secret,legacy:t.legacy}:t}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s}));class s{constructor(t){this.service=t}isPointsOnly(){return this.service.points&&(!this.service.secretKey||this.service.secretKey.legacy)}async getCallType(){if(!this.service.points&&!this.service.secretKey)return{ok:!0,type:2};if(this.service.secretKey){const e=this.service.secretKey.storageKey,n=(await browser.storage.local.get(e))[e];if(n&&("string"==typeof(t=n)||("secret"in t?t.key&&t.secret:t.id&&t.key)))return{ok:!0,type:1,secretKeyInStorage:n}}var t;const e=(await browser.storage.local.get("user")).user;return!(null==e?void 0:e.points)||(null==e?void 0:e.points)<=1?{ok:!1,reason:e?"NO_POINTS":"NEED_KEY",message:e?"你的翻译积分不够用了，请前往【服务申请】购买翻译积分。":this.isPointsOnly()?`${this.service.name}需要消耗翻译积分才能使用，请前往【服务申请】购买翻译积分。`:`使用${this.service.name}前需要在【服务申请】页面进行一些简单的配置。`}:{ok:!0,type:0}}}}}]);