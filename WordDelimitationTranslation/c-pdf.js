(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{120:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(249);const o=document.caretPositionFromPoint?function(e,t){const n=document.caretPositionFromPoint(e,t);return n&&{offsetNode:n.offsetNode,offset:n.offset}}:document.caretRangeFromPoint?function(e,t){const n=document.caretRangeFromPoint(e,t);return n&&{offsetNode:n.startContainer,offset:n.startOffset}}:void 0;const a=!o;class i{constructor(e,t=1e3,n,a=document.body){this.destroyed=!1,this.context=a,this.onMouseMove=Object(r.a)((t=>{n&&!t[n]||(!function(e,t){if(!o)return null;const n=window.getSelection();if(!n)return null;const r=o(e,t);if(!r)return null;const{offset:a,offsetNode:i}=r;if(i.nodeType!==Node.TEXT_NODE)return null;const s=n.rangeCount>0?n.getRangeAt(0):void 0;n.removeAllRanges();const l=document.createRange();l.setStart(i,a),l.setEnd(i,a),n.addRange(l),n.modify("move","backward","word"),n.modify("extend","forward","word");const u=n.getRangeAt(0).getBoundingClientRect();(u.left>e||u.left+u.width<e||u.top>t||u.top+u.height<t)&&(n.removeAllRanges(),s&&n.addRange(s))}(t.clientX,t.clientY),e(t))}),t),a.addEventListener("pointermove",this.onMouseMove)}destroy(){this.destroyed=!0,this.context.removeEventListener("pointermove",this.onMouseMove)}}},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(90),o=n(21);const a=/[\x00\x01\x02\x03\x04\x05\x06\x07\b\t\v\f\x0E\x0F\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1A\x1B\x1C\x1D\x1E\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;function i(e){return"INPUT"===e.nodeName}function s(e){return"TEXTAREA"===e.nodeName}let l;const u=/\n/g;function c(e){l||(l=document.createElement("div"),l.style.pointerEvents="none",l.style.visibility="hidden",l.style.position="absolute",document.documentElement.appendChild(l));const t=e.getBoundingClientRect(),n=e.value;l.style.top=t.top+window.pageYOffset-e.scrollTop+"px",l.style.left=t.left+window.pageXOffset+"px",l.style.width=t.width+"px";const r=window.getComputedStyle(e);var o;l.style.boxSizing=r.boxSizing,l.style.padding=r.padding,l.style.border=`${r.borderWidth} solid black`,l.style.lineHeight=r.lineHeight,l.style.fontSize=r.fontSize,l.style.fontFamily=r.fontFamily,l.innerHTML=(o=n,o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")).replace(u,"<br>");const a=n.matchAll(u),i=[];let s,c,d,p,m=0;for(const e of a)m!==e.index&&i.push(n.slice(m,e.index)),i.push("\n"),m=e.index+1;m!==n.length&&i.push(n.slice(m));let h=0;const f=e.selectionStart||0,b=e.selectionEnd||0;i.some(((e,t)=>{const n=h+e.length;if(s||n>f&&(s=l.childNodes[t],c=f-h),s&&n>=b)return d=l.childNodes[t],p=b-h,!0;h=n}));const E=document.createRange();return E.setStart(s,c),E.setEnd(d,p),E}var d=n(640);function p(e){const t=window.getSelection();if(!t)return;const n=function(e=window.getSelection()){let t;if(t=null==e?void 0:e.toString(),!t){const e=document.activeElement;if(e&&(s(e)||i(e))){const{selectionStart:n,selectionEnd:r}=e;null!=n&&null!=r&&(n||r)&&(t=e.value.slice(n,r))}}return t?t.trim().replace(a,""):""}(t);if(!n)return;let l=!1,u=t.rangeCount>0?t.getRangeAt(0):void 0;if(!u||u.collapsed){const t=document.activeElement;t&&(i(t)||s(t))?(u=c(t),l=!0):e&&e.composed&&(e.path||e.composedPath()).some((e=>{if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return u=function(e){const t=e.getSelection();if(!t||!t.rangeCount)return;const n=t.getRangeAt(0);return n.collapsed?void 0:n}(e),!0}))||(u=void 0)}const d=!u&&e?{x:e.clientX,y:e.clientY,initScrollTop:window.pageYOffset,initScrollLeft:window.pageXOffset}:void 0,p=u||{getBoundingClientRect(){if(d){const e=d.y-(window.pageYOffset-d.initScrollTop),t=d.x-(window.pageXOffset-d.initScrollLeft);return{height:0,width:0,top:e,bottom:e,left:t,right:t}}return{top:100,left:100,width:10,height:10,right:110,bottom:110}}};return{text:n,isTop:o.a,event:e&&Object(r.a)(e,["altKey","metaKey","shiftKey","ctrlKey","clientX","clientY","target"]),isInTextarea:l,rect:o.a?function(){return p.getBoundingClientRect()}:p.getBoundingClientRect()}}function m(){return{frameIndex:o.a?-1:Array.prototype.indexOf.call(window.parent.frames,window),href:window.location.href,scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset}}function h(e,t){return{type:"HCFY_SELECTION_EVENT_BUBBLE_SELECTION_INFO",data:{selection:p(t),path:[m()]},meta:e}}const f=document.createElement("style");function b(e){e.target.closest("a")&&(e.preventDefault(),e.stopImmediatePropagation())}f.textContent="a{text-decoration:none !important;cursor:text !important}";var E=n(120),g=n(37),F=n(99),y=n(3),v=n(31),w=n.n(v),C=n(39);const x=w()(o.a?"top frame detector worker":"detector worker"),A=Object(r.a)(y.a,["modifierKeys"]);class O{constructor(e){this.postMsgToTopmostFrame=e?t=>{e(t)}:e=>{window.top.postMessage(Object(C.b)(e),"*")},window.addEventListener("keyup",(e=>{27===e.keyCode&&this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_ESC_KEY"})})),document.addEventListener("pointerdown",(e=>{o.a&&"__hcfy__"===e.target.id||this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_MOUSEDOWN",event:Object(r.a)(e,["target.id"])})}),!0),window.addEventListener("scroll",(e=>{this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_SCROLL",event:o.a?e:void 0})}),!0),document.addEventListener("pointerup",(e=>{o.a&&"__hcfy__"===e.target.id||window.setTimeout((()=>{const t=h({reason:"mouseup"},e);this.bubbleInfoMsg(t)}))})),Object(g.a)(A,(({modifierKeys:e})=>{this.removeModifierKeys&&this.removeModifierKeys(),e&&e.length&&(this.removeModifierKeys=Object(F.a)(e,(()=>{this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_ACTIVE"})}),(()=>{this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_RELEASED"})}),(()=>{this.postMsgToTopmostFrame({type:"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_INTERRUPTED"})})))})),window.addEventListener("message",(({data:e})=>{const t=Object(C.a)(e);if(t)if("HCFY_SELECTION_EVENT_BUBBLE_SELECTION_INFO"===t.type){x("接收到子 worker 上报的划词信息",t);const e=function(e){const t=e.data,n=Object(d.a)(t.path);if(!n)return;const r=document.querySelectorAll("iframe,frame");let o;const a=window.frames[n.frameIndex];if(a?Array.prototype.some.call(r,(e=>{if(e.contentWindow===a)return o=e,!0})):console.error("【划词翻译】window.frames[childFrameInfo.frameIndex] 为空"),!o)return void console.error("【划词翻译】找不到对应的 iframe 元素。",n);n.rect=o.getBoundingClientRect();const i=window.getComputedStyle(o);return n.computedStyles={paddingLeft:Number(i.paddingLeft.slice(0,-2)),paddingTop:Number(i.paddingTop.slice(0,-2)),borderLeftWidth:Number(i.borderLeftWidth.slice(0,-2)),borderTopWidth:Number(i.borderTopWidth.slice(0,-2))},t.path.push(m()),e}(t);e&&this.bubbleInfoMsg(e)}else o.a||this.sendMsg(t)}))}sendMsg(e){var t;switch(x(o.a?"接收到来自顶层窗口直接发送的消息":"接收到来自 message 事件的消息",e),e.type){case"HCFY_SELECTION_EVENT_REPORT_INFO_PROACTIVE":const n=h({reason:"proactive",mid:e.mid});return o.a||this.bubbleInfoMsg(n),n;case"HCFY_SELECTION_EVENT_DISABLE_LINK":return document.head.appendChild(f),void window.addEventListener("click",b,!0);case"HCFY_SELECTION_EVENT_ENABLE_LINK":return document.head.contains(f)&&document.head.removeChild(f),void window.removeEventListener("click",b,!0);case"HCFY_SELECTION_EVENT_ENABLE_HOVER_TRANSLATE":return void(this.hs=new E.a((()=>{this.bubbleInfoMsg(h({reason:"hover"}))}),500));case"HCFY_SELECTION_EVENT_DISABLE_HOVER_TRANSLATE":return null===(t=this.hs)||void 0===t||t.destroy(),void delete this.hs}}bubbleInfoMsg(e){if(o.a){const t={type:"HCFY_SELECTION_EVENT_RECEIVE_SELECTION_INFO",data:e.data,meta:e.meta};this.postMsgToTopmostFrame(t)}else window.parent.postMessage(Object(C.b)(e),"*")}}},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=window.top===window},238:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(409),o=n(410),a=n.n(o),i=n(0),s=n.n(i);function l(e){const{children:t,id:n,stylesheetURLs:o,cssText:i}=e;return s.a.createElement(r.a.div,{style:{all:"initial"},id:n},s.a.createElement("style",null,a.a),s.a.createElement("link",{rel:"stylesheet",href:browser.runtime.getURL("normalize.css")}),s.a.createElement("link",{rel:"stylesheet",href:browser.runtime.getURL("blueprint.css")}),null==o?void 0:o.map((e=>s.a.createElement("link",{key:e,rel:"stylesheet",href:browser.runtime.getURL(e)}))),i&&s.a.createElement("style",null,i),s.a.createElement("div",{id:"root"},t))}},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return ze}));var r=n(0),o=n.n(r),a=n(121),i=n(4),s=n.n(i),l=n(59),u=n(679),c=n(401);const d="static"!==getComputedStyle(document.documentElement).position;var p=n(197),m=n.n(p);function h(){return{edges:{left:!0,right:!0,bottom:!1,top:!1},modifiers:[m.a.modifiers.restrictSize({min:{width:250,height:100}})]}}function f(e){if(!e||!e.startsWith("translate"))return null;const t=e.startsWith("translate3d"),n=e.replace("translate"+(t?"3d":""),"").match(/-?\d+(\.\d+)?/g);if(!n)return null;const r=Number(n[0]),o=Number(n[1]);return Number.isNaN(r)||Number.isNaN(o)?null:{x:r,y:o,is3d:t}}function b(e){return`translate${e.is3d?"3d":""}(${Math.round(e.x)}px,${Math.round(e.y)}px${e.is3d?",0":""})`}var E=n(10),g=n(90),F=n(3),y=n(31),v=n.n(y);function w(e,t){switch(t.type){case"overload":return t.payload;case"incremental":if(!e||!t.payload.placement)return e;const n=f(e.transform);if(!n)throw new Error("未解析到箭头的位置信息");return t.payload.placement.startsWith("bottom")||t.payload.placement.startsWith("top")?n.x=n.x-t.payload.x:(t.payload.placement.startsWith("left")||t.payload.placement.startsWith("right"))&&(n.y=n.y-t.payload.y),{...e,transform:b(n)}}}var C=n(686),x=n(116),A=n.n(x),O=n(233),T=n(64);function S(e,t){const n=e.pos;switch(t.type){case"setWidth":const r=e.width,o=t.payload;return r===o?e:{...e,width:o};case"readWidth":return t.payload(e.width),e;case"setPosSafe":const{pos:a,containerWidth:i=0,containerHeight:s=0}=t.payload,l=Object(O.a)(document.documentElement),u=Object(T.a)()||0;let c=a.x;const p=c+i-(window.innerWidth-(l.v?u:0));p>0&&(c-=p),c<0&&(c=0);let m=a.y;if(s){const e=m+s-(window.innerHeight-(l.h?u:0));e>0&&(m-=e)}return m<0&&(m=0),c===n.x&&m===n.y?null==e.otherStyles?e:{...e,otherStyles:null}:{...e,pos:{x:c,y:m,is3d:n.is3d},otherStyles:null};case"readPos":return t.payload(e.pos),e;case"importPopperStyles":const h=t.payload,b={pos:f(h.transform)||{x:0,y:0,is3d:!1},otherStyles:h};return A()(b,Object(g.a)(e,["pos","otherStyles"]))?e:{...e,...b};case"incrementalPos":const{dx:E,dy:F}=t.payload;return 0===E&&0===F?e:{...e,pos:{x:n.x+E,y:n.y+F,is3d:n.is3d}};case"switch2fixed":const{pageXOffset:y,pageYOffset:v}=window,w={...e,otherStyles:null};return d||0===y&&0===v||(w.pos={x:n.x-y,y:n.y-v,is3d:n.is3d}),w;default:return e}}const D=v()("popperContainer"),B=Object(g.a)(F.a,["width","pinPos"]);var k=Object(r.forwardRef)((function(e,t){const{pin:n,setPin:a,range:i,show:p,placement:f,setMaxHeight:F}=e,y=Object(r.useRef)(null),v=Object(r.useRef)(null),x=Object(r.useMemo)((()=>p&&!n&&i?i:null),[i,p,n]),[A,O]=Object(r.useReducer)(S,{width:B.width,pos:{x:0,y:0,is3d:!1},otherStyles:null}),[T,k]=Object(E.a)(B),_=T?T.width:B.width,j=e=>{D("保存窗口宽度",e),k({width:e})};Object(r.useEffect)((()=>{D("同步 storage 中的宽度",_),O({type:"setWidth",payload:_})}),[_]);const N=T?T.pinPos:B.pinPos,L=e=>{const t=e&&Object(g.a)(e,["x","y"]);D("保存窗口位置",t),k({pinPos:t})},I=()=>{n?O({type:"readPos",payload:L}):D("保存窗口位置时由于不是 pin 状态，取消保存")},R=Object(r.useCallback)((()=>{var e,t;N&&(D("设置窗口位置"),O({type:"setPosSafe",payload:{pos:N,containerWidth:null===(e=y.current)||void 0===e?void 0:e.clientWidth,containerHeight:null===(t=y.current)||void 0===t?void 0:t.clientHeight}}))}),[N]);Object(r.useEffect)((()=>{if(n&&p)return R(),window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R)}}),[R,n,p]);const[M,P]=Object(r.useReducer)(w,null),{realtimePlacement:z,updatePopper:H,popperStyles:Y,popperAttrs:K,arrowStyles:V,maxSizeObj:W}=function(e,t,n,r){const{styles:o,attributes:a,update:i,state:s}=Object(u.a)(e,t,{placement:r,strategy:d?"fixed":void 0,modifiers:[{name:"arrow",options:{element:n}},{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,12]}},c.a]});return{realtimePlacement:e&&(null==s?void 0:s.placement)||null,updatePopper:e?i:null,popperStyles:e?o.popper:null,popperAttrs:e?a.popper:null,arrowStyles:e?o.arrow:null,maxSizeObj:e&&(null==s?void 0:s.modifiersData.maxSize)||null}}(x,y.current,v.current,f);Object(r.useEffect)((()=>{P({type:"overload",payload:V})}),[V]),Object(r.useEffect)((()=>{!n&&W&&F(W.height)}),[W,n,F]),Object(C.a)((()=>{Y&&(D("导入 popperjs 的样式",Y),O({type:"importPopperStyles",payload:Y}))}),[Y]);const U=function(e,t,n,o){const[a,i]=Object(r.useState)(null),[s,l]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{if(!e)return;const t=m()(e);return t.resizable({...h(),onstart(){l(!0)}}),i(t),()=>{t.unset(),i(null)}}),[e]),Object(r.useEffect)((()=>{if(!a)return;let e;if(t){const n=t.indexOf("-");switch(e=n>0?t.slice(0,n):t,e){case"top":e="bottom";break;case"bottom":e="top";break;case"left":e="right";break;case"right":e="left"}if("top"===e||"bottom"===e)return}const n=h();e&&(n.edges[e]=!1),a.set({resize:n})}),[t,a]),Object(r.useEffect)((()=>{if(!a)return;const e=function(e){n(e.rect.width,e.deltaRect.left,e.deltaRect.top)};return a.on("resizemove",e),()=>{a.off("resizemove",e)}}),[n,a]),Object(r.useEffect)((()=>{if(!a)return;const e=function(){l(!1),o()};return a.on("resizeend",e),()=>{a.off("resizeend",e)}}),[a,o]),s}(y.current,z,((e,t,n)=>{O({type:"setWidth",payload:e}),O({type:"incrementalPos",payload:{dx:t,dy:n}}),P({type:"incremental",payload:{x:t,y:n,placement:z}})}),(()=>{O({type:"readWidth",payload:j}),I()}));!function(e,t,n,o,a){const[i,s]=Object(r.useState)(null),[l,u]=Object(r.useState)(!1);Object(r.useEffect)((()=>{if(!e)return;const n=e.querySelector(t);if(!n)return;const r=m()(n);return r.draggable(!0).styleCursor(!1),s(r),()=>{r.unset(),s(null)}}),[e,t]),Object(r.useEffect)((()=>{if(!i)return;const e=()=>{u(!0),n()};return i.on("dragstart",e),()=>{i.off("dragstart",e)}}),[i,n]),Object(r.useEffect)((()=>{if(!i)return;const e=e=>{o(e.dx,e.dy)};return i.on("dragmove",e),()=>{i.off("dragmove",e)}}),[i,o]),Object(r.useEffect)((()=>{if(!i)return;const e=()=>{u(!1),a()};return i.on("dragend",e),()=>{i.off("dragend",e)}}),[i,a])}(y.current,".drag-block",(()=>{a((e=>(e||(D("拖拽过程中将窗口转为固定模式位置"),O({type:"switch2fixed"})),!0)))}),((e,t)=>{O({type:"incrementalPos",payload:{dx:e,dy:t}})}),(()=>{I()})),Object(r.useImperativeHandle)(t,(()=>({switch2pin(){D("主动调用 switch2pin 方法转为固定模式"),O({type:"switch2fixed"}),I()},clearPos(){D("由于转为了非固定模式，所以清空了 storage 里的位置"),L(null),window.setTimeout((()=>{H&&H()}))}})));const $=Object(r.useMemo)((()=>{const e={...A.otherStyles,width:A.width,transform:b(A.pos)};return D("合成 container 样式",e),e}),[A]);return o.a.createElement("div",Object.assign({id:"popper-container",ref:y,style:$},K,{className:s()({show:p,pin:n},"bp3-elevation-4")}),o.a.createElement(l.K,{onResize:()=>{n&&p&&!U&&R()}},e.children),o.a.createElement("div",{className:"arrow",ref:v,style:M||void 0}))})),_=n(87);const j=function(e){e.preventDefault()},N=Object(g.a)(F.a,["buttonAutoClose"]);function L(e){const{btnPos:t,setBtnPos:n,onBtnClick:a}=e,i=t?"show":void 0,[s]=Object(E.a)(N),u=Object(r.useRef)(),[c,d]=Object(r.useState)(!1),p=t?{transform:`translate(${t.x+10}px,${t.y+10}px)`}:void 0;return Object(r.useEffect)((()=>{if(!(null==s?void 0:s.buttonAutoClose))return d(!1),void window.clearTimeout(u.current);t?c?window.clearTimeout(u.current):u.current=window.setTimeout((()=>{n(null)}),2e3):(d(!1),window.clearTimeout(u.current))}),[t,c,n,null==s?void 0:s.buttonAutoClose]),o.a.createElement("div",{id:"translate-btn",className:i,style:p,onPointerDown:j,onPointerEnter:()=>{d(!0)},onPointerLeave:()=>{d(!1)}},o.a.createElement(l.d,{icon:o.a.createElement("span",{className:"btn-icon"}),onClick:a}))}var I=n(120),R=n(73),M=n(32),P=n(105),z=n(46),H=n(99),Y=n(674),K=n(640),V=n(298),W=n(141),U=n(39);const $=v()("detector master");function q(e){const t=e.selection;let n=null;if(t){const r=t.text,o=t.event;let a,i,s;if("function"==typeof t.rect)a=t.rect(),i={getBoundingClientRect:t.rect},s=o?{x:o.clientX+e.path[0].scrollLeft,y:o.clientY+e.path[0].scrollTop}:null;else{s=o?{x:o.clientX,y:o.clientY}:null;const n=e.path;a=Object(g.a)(t.rect,["top","left","width","height","right","bottom"]),Object(Y.a)(n,(e=>{if(e.rect&&e.computedStyles){const t=e.rect.left+e.computedStyles.paddingLeft+e.computedStyles.borderLeftWidth,n=e.rect.top+e.computedStyles.paddingTop+e.computedStyles.borderTopWidth;a.left+=t,a.top+=n,s&&(s.x+=t,s.y+=n)}})),a.right=a.left+a.width,a.bottom=a.top+a.height,i={getBoundingClientRect:()=>a};const r=Object(K.a)(e.path);s=s?{x:s.x+r.scrollLeft,y:s.y+r.scrollTop}:null}n={text:r,mouseUpEvent:o,isTop:t.isTop,isInTextarea:t.isInTextarea,range:i,btnPos:s}}return{parsedData:n,activeFrameIndex:e.path.map((e=>e.frameIndex))}}var X=n(407),Q=n.n(X),J=n(252);const G=Object(g.a)(F.a,["localOCR"]);function Z(e){const{imgSrc:t,isShow:n,setIsShow:a,onText:i,isLocalOCR:s}=e,[u,c]=Object(E.a)(G),d=Object(r.useRef)(null),p=Object(r.useRef)(),m=Object(r.useRef)(null),[h,f]=Object(r.useState)(null);return Object(r.useLayoutEffect)((()=>{if(!n)return;const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}),[n]),Object(r.useLayoutEffect)((()=>{if(!n||!d.current)return;const e=d.current,t=new Q.a(d.current,{viewMode:1,guides:!1,center:!1,minContainerWidth:e.clientWidth,minContainerHeight:e.clientHeight,autoCrop:!1,movable:!1,rotatable:!1,scalable:!1,zoomable:!1,zoomOnTouch:!1,zoomOnWheel:!1,cropstart(){f(null)},cropend(){const e=t.getCropBoxData();f({left:-9999,top:-9999}),window.setTimeout((()=>{var t;f({left:e.left+e.width-((null===(t=m.current)||void 0===t?void 0:t.clientWidth)||0),top:e.top+e.height+5})}))}});return p.current=t,()=>{f(null),t.destroy(),p.current=void 0}}),[n]),Object(r.useEffect)((()=>{if(!n)return;const e=e=>{27===e.keyCode&&(e.stopPropagation(),a(!1))};return window.addEventListener("keyup",e,!0),()=>{window.removeEventListener("keyup",e,!0)}}),[a,n]),n?o.a.createElement("div",{id:"ocr-container"},o.a.createElement("div",{ref:m,className:"toolbar",style:{display:h?"block":"none",left:null==h?void 0:h.left,top:null==h?void 0:h.top}},o.a.createElement(l.d,{onClick:()=>{var e;if(!window.isSecureContext)return void window.alert("受限于浏览器的安全策略，复制截图只能在 https 网站使用。");if(!(null===(e=navigator.clipboard)||void 0===e?void 0:e.write))return void window.alert("复制截图的功能需要在 Chrome 66 / Edge 79 及以上的版本中才能使用。");const t=p.current;t&&t.getCroppedCanvas({imageSmoothingEnabled:!1}).toBlob((e=>{e&&navigator.clipboard.write([new ClipboardItem({[e.type]:e})]).then((()=>{a(!1)}),(e=>{window.alert("复制失败，错误消息："+e.message)}))}))}},"复制截图"),s&&o.a.createElement(J.a,{value:(null==u?void 0:u.localOCR.lang)||G.localOCR.lang,onChange:e=>{c((t=>{t.localOCR.lang=e}))}}),o.a.createElement(l.d,{onClick:()=>a(!1)},"取消 (Esc)"),o.a.createElement(l.d,{onClick:()=>{const e=p.current;if(!e)return;const t=e.getCroppedCanvas().toDataURL(),n=e.getCropBoxData();i(t,n),a(!1)}},"确定")),o.a.createElement("img",{ref:d,src:t,alt:"屏幕截图"})):null}var ee,te;!function(e){e.both="both",e.source="source",e.result="result"}(ee||(ee={})),function(e){e.inline="inline",e.block="block"}(te||(te={}));class ne{constructor(e,t,n){this.translating=!1,this.translated=!1,this.showType=null,this.ele=e,this.text=e.innerText.trim(),e.__hcfy__webTranslateObj=this,this.type=t,this.trsQueue=n}getResultElement(){if(this.resultEle)return this.resultEle;const e=this.type,t=document.createElement("hcfy-result");switch(this.resultEle=t,e){case te.inline:t.style.display="inline",t.style.marginLeft="5px";break;case te.block:t.style.display="block";break;default:throw new TypeError("不支持的处理类型："+e)}return t}translate(){if(this.translating||this.translated||this.showType===ee.source)return;const e=this.getResultElement(),t=this.text;if(!t)return e.textContent="",void(this.translated=!0);this.translating=!0,e.textContent="正在翻译，请稍候……",new Promise(((e,n)=>{this.trsQueue.addStream({text:t,resolve:e,reject:n})})).then((t=>{this.translating=!1,null==t?this.translate():(this.translated=!0,e.textContent=t)}),(t=>{this.translating=!1,this.translated=!0,e.textContent="翻译结果时出错，请稍后重试。错误信息："+t.message}))}switchShowType(e){if(e===this.showType)return;switch(e){case ee.source:this.resultEle&&this.ele.contains(this.resultEle)&&this.ele.removeChild(this.resultEle),this.tempFR&&(this.ele.appendChild(this.tempFR),delete this.tempFR);break;case ee.result:if(!this.tempFR){const e=document.createDocumentFragment();this.tempFR=e,Array.from(this.ele.childNodes).forEach((t=>{t!==this.resultEle&&e.appendChild(t)}))}this.ele.appendChild(this.getResultElement());break;case ee.both:this.tempFR&&(this.ele.appendChild(this.tempFR),delete this.tempFR),this.ele.appendChild(this.getResultElement());break;default:throw new TypeError(`不支持的显示类型：${e}`)}const t=this.showType;this.showType=e,t===ee.source&&this.translate()}destroy(e=!1){e||this.switchShowType(ee.source),delete this.ele.__hcfy__webTranslateObj,delete this.resultEle}}var re=n(61);class oe{constructor(e){this.stream=[],this.streamTextLength=0,this.queue=[],this.handling=!1,this.apiCode=e}addStream(e){const t=e.text.length;t&&(this.streamTextLength+t>4e3&&(this.queue.push(this.stream),this.stream=[],this.streamTextLength=0,this.handleTask()),this.stream.push(e),this.streamTextLength+=t,window.setTimeout((()=>{this.handleTask()}),500))}handleTask(){if(this.handling)return;let e=this.queue.shift();if(!e){if(!this.stream.length)return;e=this.stream,this.stream=[],this.streamTextLength=0}this.handling=!0;const t=[],n=[];e.forEach((e=>{const r=e.text.split("\n").map((e=>e.trim())).filter(re.a);n.push({start:t.length,end:t.length+r.length}),t.push(...r)})),browser.runtime.sendMessage({action:"translate",data:{apiCode:this.apiCode,text:t.join("\n")}}).then((t=>{var r;let o;if(t.result)o=t.result;else{const e=null===(r=t.dict)||void 0===r?void 0:r[0].terms[0];e&&(o=[e])}const a=t.error;e.forEach(((e,t)=>{if(a)return void e.reject(new Error(a.message));if(!o)return void e.reject(new Error("没有翻译结果"));const r=n[t],i=r.end-r.start,s=o.slice(r.start,r.end);e.resolve(s.length===i?s.join("\n"):null)})),this.handling=!1}),(t=>{e.forEach((e=>{e.reject(t)})),this.handling=!1})).then((()=>{this.handleTask()}))}}const ae=["h1","h2","h3","h4","h5","h6"],ie=`${["p"].join(",")},${ae.join(",")}`,se=["li","dd","dt"].join(",");function le(e){return Array.prototype.some.call(e.childNodes,(e=>{var t;return e.nodeType===Node.TEXT_NODE&&(null===(t=e.nodeValue)||void 0===t?void 0:t.trim().length)}))}const ue=["a","button"].join(",");function ce(e){return e.nodeType===Node.ELEMENT_NODE}class de{constructor(e){this.elements=[],this.showType=ee.both,this.intersectionObserver=new IntersectionObserver((e=>{e.forEach((e=>{if(0===e.intersectionRatio)return;const t=e.target,n=this.elements.find((e=>e.ele===t));n&&n.translate()}))}),{threshold:.01}),this.mutationObserver=new MutationObserver((e=>{this.analysisStructure(e.reduce(((e,t)=>(t.addedNodes.forEach((t=>{ce(t)&&"hcfy-result"!==t.tagName.toLowerCase()&&e.push(t)})),t.removedNodes.forEach((e=>{ce(e)&&this.deepRemove(e)})),e)),[]))})),this.trsQueue=new oe(e),this.analysisStructure([document.body]),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0})}isParentHandled(e){return this.elements.some((t=>t.ele.contains(e)))}analysisStructure(e){e.forEach((e=>{if(e.matches(ie))return void this.tryAddTranslateElement(e,ae.includes(e.tagName.toLowerCase())?te.inline:te.block);if(e.matches(se)&&le(e)&&this.tryAddTranslateElement(e,te.block),e.matches(ue))return void this.tryAddTranslateElement(e,te.inline);Array.from(e.querySelectorAll(ie)).forEach((e=>{this.tryAddTranslateElement(e,ae.includes(e.tagName.toLowerCase())?te.inline:te.block)}));const t=e.querySelectorAll(se);Array.prototype.forEach.call(t,(e=>{le(e)&&this.tryAddTranslateElement(e,te.block)}));Array.from(e.querySelectorAll(ue)).forEach((e=>{this.tryAddTranslateElement(e,te.inline)}))}))}remove(e,t=!1){const n=e.__hcfy__webTranslateObj;if(!n)return;n.destroy(t),this.intersectionObserver.unobserve(e);const r=this.elements.indexOf(n);r>=0&&this.elements.splice(r,1)}deepRemove(e,t=!1){const n=e=>{this.remove(e,t),Array.prototype.forEach.call(e.children,(e=>{n(e)}))};n(e)}tryAddTranslateElement(e,t){if(function(e){var t;if(e.__hcfy__webTranslateObj)return!1;if(Array.prototype.some.call(e.children,(e=>!!e.__hcfy__webTranslateObj)))return!1;const n=null===(t=e.textContent)||void 0===t?void 0:t.trim();return!!n&&!/^[0-9\s.\-_]+$/.test(n)}(e)&&!this.isParentHandled(e)){const n=new ne(e,t,this.trsQueue);this.elements.push(n),this.intersectionObserver.observe(e),n.switchShowType(this.showType)}}switchShowType(e){this.showType=e,this.elements.forEach((t=>t.switchShowType(e)))}destroy(){this.intersectionObserver.disconnect(),this.mutationObserver.disconnect(),this.elements.forEach((e=>e.destroy())),this.elements=[]}}var pe=n(119),me=n(98),he=n(72);const fe=[{name:"双语",value:ee.both},{name:"原文",value:ee.source},{name:"译文",value:ee.result}];function be(e){const{apiCode:t,onShowTypeChange:n,onAPIChange:a}=e,[i,s]=Object(r.useState)(ee.both);return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.u,{value:t,onChange:e=>{const t=e.currentTarget.value;a(t)}},he.a.map((e=>"BingDictWeb"===e.id?null:o.a.createElement("option",{key:e.id,value:e.id},e.name)))),o.a.createElement(l.e,null,fe.map((e=>o.a.createElement(l.d,{key:e.value,active:i===e.value,onClick:()=>{s(e.value),e.value!==i&&n(e.value)},text:e.name})))))}const Ee=new me.a("pageTranslateLimit",3),ge=Object(g.a)(F.a,["pageTrsApi"]);function Fe(e){const{open:t,setOpen:n}=e,[a,i]=Object(E.a)(ge),s=null==a?void 0:a.pageTrsApi,[u,c]=Object(r.useState)(null),d=Object(r.useRef)(),p=Object(r.useRef)("");return Object(r.useEffect)((()=>{if(s&&u){if(t){d.current||Ee.isOver(!0).then((e=>{e?(n(!1),u.show({action:{text:"开通会员",onClick:pe.b},message:"非会员每天只能使用 3 次网页全文翻译功能，成为会员即可解除此限制。",intent:"primary",timeout:0})):d.current=new de(s)}));const e={message:o.a.createElement(be,{onShowTypeChange:e=>{var t;null===(t=d.current)||void 0===t||t.switchShowType(e)},apiCode:s,onAPIChange:e=>{i({pageTrsApi:e})}}),timeout:0,onDismiss(){p.current="",n(!1)}};return p.current?u.show(e,p.current):p.current=u.show(e),()=>{d.current&&(d.current.destroy(),d.current=void 0)}}p.current&&u.dismiss(p.current)}}),[s,t,n,i,u]),o.a.createElement(l.T,{position:"bottom-right",ref:c,className:"app-toaster-container",usePortal:!1})}var ye=n(20);function ve(e){const{mediaElement:t,serviceImplement:n,lang:o,onStart:a,onStop:i}=e,[s,l]=Object(r.useState)(!1),[u,c]=Object(r.useState)([]),[d,p]=Object(r.useState)(""),m=t instanceof HTMLAudioElement?"音频":"视频",h=Object(r.useRef)(!1),f=Object(r.useRef)(),b=()=>{c([]),p("")},E=Object(r.useCallback)((()=>{if(t){if(s)throw new Error("识别服务正在运行，在停止前无法直接开始。");h.current=!1,l(!0),t.pause(),n.mediaStream(t,o,{onInterim:e=>{h.current||p(e)},onSentence:e=>{h.current||c((t=>Object(ye.b)(t,(t=>{t.push(e)}))))},onStop:e=>{if(h.current)return;b();const t=e.join("\n");t.length?i(t):i()},onError:e=>{h.current||(window.alert(e.message),b(),l(!1),i())}}).then((e=>{e&&(h.current?e.abort():(f.current=e,t.play(),a()))}))}}),[o,t,a,i,s,n]),g=Object(r.useCallback)((()=>{var e;l(!1),null===(e=f.current)||void 0===e||e.stop(),f.current=void 0,null==t||t.pause()}),[t]),F=Object(r.useCallback)((()=>{var e;h.current=!0,l(!1),null===(e=f.current)||void 0===e||e.abort(),f.current=void 0}),[]);return Object(r.useEffect)((()=>F),[F]),{start:E,stop:g,abort:F,running:s,mediaText:m,allSentences:u,interimSentence:d}}const we=new me.a("videoLimit",5);let Ce="";function xe(e){e.show({action:{text:"开通会员",onClick:pe.b},message:`非会员每天只能翻译 ${we.max} 个音视频，成为会员即可解除此限制。`,intent:"primary",timeout:0})}function Ae(e){const{disabled:t,toaster:n}=e,{start:r,stop:a,running:i,mediaText:s,allSentences:u,interimSentence:c}=ve(e);return o.a.createElement("div",null,o.a.createElement("div",null,i&&o.a.createElement(l.d,{disabled:t,icon:"stop",intent:"primary",onClick:a},"停止识别并翻译"),!i&&o.a.createElement(l.d,{disabled:t,icon:"play",intent:"primary",onClick:()=>{we.isOver().then((e=>{e?xe(n):r()}))}},"播放",s,"并开始识别")),o.a.createElement("div",null,u.map(((e,t)=>o.a.createElement("div",{key:t},e))),o.a.createElement("span",{style:{opacity:.6}},c)))}var Oe=n(133),Te=n(88);function Se(e){const{disabled:t,serviceImplement:n,onStop:a,toaster:i}=e,{start:s,abort:u,running:c,mediaText:d,allSentences:p,interimSentence:m}=ve(e),h=!n.service.realtime,f=t||h,b=p[p.length-1],[E,g]=Object(r.useState)({text:"正在等待识别出一个完整的句子……",result:""});return Object(r.useEffect)((()=>{if(!b)return;let e=!1;return g({text:b,result:"正在翻译，请稍候……"}),browser.runtime.sendMessage({action:"translate",data:{apiCode:"GoogleWeb",text:b}}).then((t=>{var n;if(e)return;const r=t.error?t.error.message:(null===(n=t.result)||void 0===n?void 0:n.join(""))||"没有翻译结果";g({text:b,result:r})}),(t=>{e||g({text:b,result:t.message})})),()=>{e=!0}}),[b]),o.a.createElement("div",null,h&&o.a.createElement(l.f,{intent:"primary"},n.service.name,"不支持实时翻译功能，请选择名称中带有“实时语音识别”的服务。"),!c&&o.a.createElement(l.d,{intent:"primary",icon:"play",disabled:f,onClick:()=>{we.isOver().then((e=>{e?xe(i):s()}))}},"播放",d,"并开始实时翻译"),c&&o.a.createElement(o.a.Fragment,null,o.a.createElement(l.d,{intent:"primary",icon:"stop",onClick:()=>{u(),a()}},"停止实时翻译"),o.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",textAlign:"center",color:"white"}},o.a.createElement("div",{style:{width:"80%",margin:"0 auto"}},o.a.createElement("div",{style:{marginBottom:10,fontSize:18}},o.a.createElement("span",{style:{backgroundColor:"rgba(0,0,0,0.8)"}},E.text)),o.a.createElement("div",{style:{fontSize:24}},o.a.createElement("span",{style:{backgroundColor:"rgba(0,0,0,0.8)"}},E.result))))),o.a.createElement("div",{style:{opacity:.6}},m))}const De={0:"逐句翻译",1:"实时翻译"};function Be(e){const{onText:t}=e,[n]=Object(r.useState)((()=>Array.from(document.querySelectorAll("video,audio")))),[a,i]=Object(r.useState)(0),[s,u]=Object(r.useState)("0"),[c,d]=Object(r.useState)("TencentRealtime"),[p,m]=Object(r.useState)(Te.a),[h,f]=Object(r.useState)(Te.c.defaultLang),[b,E]=Object(r.useState)(!1),g=Oe.a[c];Object(r.useEffect)((()=>{m(Oe.b[g.service.id]),f(g.service.defaultLang)}),[g]);const F=Object(r.useCallback)((()=>{E(!0),function(){const e=window.location.href;Ce!==e&&(Ce=e,we.addOne())}()}),[]),y=Object(r.useCallback)((e=>{E(!1),e&&t(e)}),[t]),v=n[a],w=!v,C="default-speech"===c,x=w||C;Object(r.useEffect)((()=>{null==v||v.pause()}),[v]);const A=v instanceof HTMLAudioElement?"音频":"视频";return o.a.createElement(o.a.Fragment,null,w&&o.a.createElement(l.f,{intent:"primary",style:{marginBottom:10}},"当前页面没有视频或音频。"),C&&o.a.createElement(l.f,{intent:"primary",style:{marginBottom:10}},g.service.name,"不支持音视频翻译功能，请选择其它语音服务。"),n.length>1&&o.a.createElement("div",null,"选择要翻译的音 / 视频：",o.a.createElement(l.u,{disabled:b,value:a,onChange:e=>{const t=Number(e.currentTarget.value);i(t)}},n.map(((e,t)=>o.a.createElement("option",{key:t,value:t},t))))),o.a.createElement(l.J,{inline:!0,className:"translate-type-selector",label:"翻译方式：",selectedValue:s,onChange:e=>{u(e.currentTarget.value)},disabled:b||x},Object.keys(De).map((e=>o.a.createElement(l.I,{key:e,value:e},De[e]))),o.a.createElement("a",{href:"https://hcfy.limingkai.cn/docs/guides/video/",target:"_blank",rel:"noreferrer"},"查看使用说明")),o.a.createElement("div",null,"选择要使用的语音识别服务：",o.a.createElement(l.u,{disabled:b||x,value:c,onChange:e=>{d(e.currentTarget.value)}},Oe.c.map((e=>o.a.createElement("option",{key:e.id,value:e.id},e.name))))),o.a.createElement("div",null,"选择",A,"的语种：",o.a.createElement(l.u,{disabled:b||x,value:h,onChange:e=>{f(e.currentTarget.value)}},Object.keys(p).map((e=>o.a.createElement("option",{key:e,value:e},p[e]))))),"0"===s&&o.a.createElement(Ae,{toaster:e.toaster,disabled:x,mediaElement:v,serviceImplement:g,lang:h,onStart:F,onStop:y}),"1"===s&&o.a.createElement(Se,{toaster:e.toaster,disabled:x,mediaElement:v,serviceImplement:g,lang:h,onStart:F,onStop:y}))}function ke(e){const{show:t,onClose:n,onText:a}=e,[i,s]=Object(r.useState)(null),u=Object(r.useRef)();return Object(r.useEffect)((()=>{i&&(t?we.isOver().then((e=>{e?(n(),xe(i)):u.current=i.show({message:o.a.createElement(Be,{onText:a,toaster:i}),timeout:0,onDismiss:()=>{u.current=void 0,n()}},u.current)})):u.current&&i.dismiss(u.current))}),[n,a,t,i]),o.a.createElement(l.T,{position:"bottom-right",ref:s,className:"app-toaster-container",usePortal:!1})}const _e=Object(g.a)(F.a,["button","disableInTextarea","domainBlackList","domainWhiteList","textList","placement","pin","pinPos","pinIgnoreDomainList","showTextArea","panelSize","modifierKeys","modifierKeyPressedAction","modifierKeyTranslate","modifierKeyLink","tipOcrChangeClosed","ocrService"]);function je(e,t,n,r){return!(!e&&!n)&&!(null==r?void 0:r.some((e=>e.test(t))))}function Ne(e){const{pin:t,onClick:n,size:r}=e;return o.a.createElement("div",{className:"switch-pin",onClick:n},o.a.createElement(l.d,{icon:o.a.createElement(l.w,{icon:"pin",iconSize:_.a[r]}),small:"small"===r,large:"large"===r,minimal:!0,active:t}))}const Le=new class{constructor(){this.topParsedData=null,this.activeFrameIndex=null,this.msgMap=new Map,this.listeners=null,this.topWorker=new W.a((e=>{$("收到来自顶层 worker 发送的消息",e),this.sendMsg(e)})),window.addEventListener("message",(({data:e})=>{const t=Object(U.a)(e);t&&($("收到来自 iframe worker 发送的消息",t),this.sendMsg(t))}))}sendMsg(e){var t,n,r,o,a,i,s,l,u;switch(e.type){case"HCFY_SELECTION_EVENT_MOUSEDOWN":this.clearSelectionData(),null===(t=this.listeners)||void 0===t||t.onMouseDown(e.event);break;case"HCFY_SELECTION_EVENT_RECEIVE_SELECTION_INFO":const{parsedData:c,activeFrameIndex:d}=q(e.data);this.topParsedData=(null==c?void 0:c.isTop)?c:null,this.activeFrameIndex=d;const{reason:p}=e.meta;if("mouseup"===p)c&&(null===(n=this.listeners)||void 0===n||n.onMouseUp(c,c.mouseUpEvent));else if("hover"===p)c&&(null===(r=this.listeners)||void 0===r||r.onHoverSelection(c));else if("proactive"===p){const t=e.meta.mid;if(t){const e=this.msgMap.get(t);e&&(this.msgMap.delete(t),e(c||void 0))}}break;case"HCFY_SELECTION_EVENT_SCROLL":if(this.topParsedData)null===(o=this.listeners)||void 0===o||o.onScroll(this.topParsedData,e.event);else if(this.isTopFrameActivated()){const t=this.getInfoSync();t&&(null===(a=this.listeners)||void 0===a||a.onScroll(t,e.event))}else this.getInfo().then((t=>{var n;t&&(null===(n=this.listeners)||void 0===n||n.onScroll(t,e.event))}));break;case"HCFY_SELECTION_EVENT_ESC_KEY":this.clearSelectionData(),null===(i=this.listeners)||void 0===i||i.onEsc();break;case"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_ACTIVE":null===(s=this.listeners)||void 0===s||s.onModifierKeysActive();break;case"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_RELEASED":null===(l=this.listeners)||void 0===l||l.onModifierKeysReleased();break;case"HCFY_SELECTION_EVENT_ON_MODIFIER_KEYS_INTERRUPTED":null===(u=this.listeners)||void 0===u||u.onModifierKeysInterrupted()}}isTopFrameActivated(){var e;return-1===(null===(e=this.activeFrameIndex)||void 0===e?void 0:e[0])}getInfoSync(){const e=this.topWorker.sendMsg({type:"HCFY_SELECTION_EVENT_REPORT_INFO_PROACTIVE",mid:"sync"});if(e)return q(e.data).parsedData}getInfo(){return new Promise((e=>{if(!this.activeFrameIndex)return void e(void 0);if(this.isTopFrameActivated())return void e(this.getInfoSync());const t=this.activeFrameIndex.reduceRight(((e,t)=>e?-1===t?e:e.frames[t]:null),window);if(t){const n=Object(V.a)();this.msgMap.set(n,e),t.postMessage(Object(U.b)({type:"HCFY_SELECTION_EVENT_REPORT_INFO_PROACTIVE",mid:n}),"*")}}))}clearSelectionData(){this.topParsedData=null}sendToAllFrames(e){this.topWorker.sendMsg(e),function t(n){Array.prototype.forEach.call(n,(n=>{n.postMessage(Object(U.b)(e),"*"),t(n.frames)}))}(window.frames)}disableLink(){this.sendToAllFrames({type:"HCFY_SELECTION_EVENT_DISABLE_LINK"})}enableLink(){this.sendToAllFrames({type:"HCFY_SELECTION_EVENT_ENABLE_LINK"})}enableHoverTranslate(){this.sendToAllFrames({type:"HCFY_SELECTION_EVENT_ENABLE_HOVER_TRANSLATE"})}disableHoverTranslate(){this.sendToAllFrames({type:"HCFY_SELECTION_EVENT_DISABLE_HOVER_TRANSLATE"})}};function Ie(){const[e,t]=Object(E.a)(_e),n="tesseractocr"===(null==e?void 0:e.ocrService),i=null==e?void 0:e.button,s=null==e?void 0:e.domainBlackList,u=null==e?void 0:e.domainWhiteList,c=null==e?void 0:e.textList,d=(null==e?void 0:e.placement)||_e.placement,p=e?e.pin:_e.pin,m=e?e.pinIgnoreDomainList:_e.pinIgnoreDomainList,h=(null==e?void 0:e.panelSize)||_e.panelSize,f="small"===h,b="large"===h,g=Object(r.useMemo)((()=>null==c?void 0:c.reduce(((e,t)=>(t.enabled&&e.push(new RegExp(t.value)),e)),[])),[c]),[F,y]=Object(r.useState)(null),[v,w]=Object(r.useState)(!1),C=Object(r.useRef)(null),[x,A]=Object(r.useState)(),[O,T]=Object(r.useState)(!1),[S,D]=Object(r.useState)(void 0),B=(()=>{const e=window.location.href;return!!Object(z.b)(e)||(!!(p&&m&&v)||(void 0!==u&&void 0!==s?Object(M.c)(e,s,u):void 0))})();Object(r.useEffect)((()=>{if(p){function e(){D(window.innerHeight)}return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}D(void 0)}),[p]);const j=Object(r.useRef)(null);Object(R.a)(j.current);const[N,Y]=Object(r.useState)(!1),[K,V]=Object(r.useState)(""),[W,U]=Object(r.useState)(null);async function $(){var e;const t=await Le.getInfo();t&&(A(t.range),null===(e=X.current)||void 0===e||e.translate(t.text),w(!0))}Object(r.useEffect)((()=>{if(!j.current)throw new Error("找不到 app root 元素");const e=new a.a(j.current,"bp3-focus-disabled");return e.start(),()=>{e.stop()}}),[]);const q=Object(r.useRef)(v),X=Object(r.useRef)(null);async function Q(){V(await browser.runtime.sendMessage({action:"take screenshot"})),Y(!0)}Object(r.useEffect)((()=>(v&&!q.current&&browser.storage.local.get("autoPlay").then((({autoPlay:e})=>{var t;e&&(null===(t=X.current)||void 0===t||t.play())})),()=>{q.current=v})),[v]);const J=Object(r.useCallback)((()=>{y(null),$()}),[]);Object(r.useEffect)((()=>{browser.runtime.onMessage.addListener((e=>{switch(e){case"translate":return void J();case"getSelectionText":return Le.getInfo().then((e=>(null==e?void 0:e.text)||""));case"screenshot translate":Q();break;case"page translate":te((e=>!e));break;case"video translate":oe((e=>!e))}}))}),[J]),Object(r.useEffect)((()=>{function t(){Le.enableLink(),"hover"===(null==e?void 0:e.modifierKeyPressedAction)&&T(!1)}void 0!==B&&void 0!==i&&g&&(Le.listeners={onMouseUp(t,n){if((null==e?void 0:e.disableInTextarea)&&t.isInTextarea)return;const r=n&&"selection"===(null==e?void 0:e.modifierKeyPressedAction)&&Object(H.b)(n,e.modifierKeys);je(B,t.text,r||!1,g)&&(v||!i||r?$():y(t.btnPos))},onMouseDown(){y(null),p||w(!1)},onScroll(e,t){e.isTop&&(null==t?void 0:t.target)===document||A(e.isTop?Object.assign({},e.range):e.range)},onEsc(){y(null),w(!1)},onModifierKeysActive(){(null==e?void 0:e.modifierKeyLink)&&Le.disableLink(),"hover"===(null==e?void 0:e.modifierKeyPressedAction)&&T(!0)},onModifierKeysReleased(){t(),(null==e?void 0:e.modifierKeyTranslate)&&J()},onModifierKeysInterrupted(){t()},onHoverSelection(e){je(!0,e.text,!1,g)&&$()}})}),[i,B,g,v,null==e?void 0:e.modifierKeyLink,null==e?void 0:e.modifierKeyPressedAction,null==e?void 0:e.modifierKeyTranslate,null==e?void 0:e.modifierKeys,null==e?void 0:e.disableInTextarea,p,J]),Object(r.useEffect)((()=>{I.b||(O?Le.enableHoverTranslate():Le.disableHoverTranslate())}),[O]);const G=o.a.createElement(l.d,{className:"cut-btn",onClick:Q,icon:o.a.createElement(l.w,{icon:"cut",iconSize:_.a[h]}),small:"small"===h,large:"large"===h,minimal:!0,title:"截图翻译"}),[ee,te]=Object(r.useState)(!1),ne=o.a.createElement(l.d,{className:"cut-btn",onClick:()=>te(!0),icon:o.a.createElement(l.w,{icon:"translate",iconSize:_.a[h]}),small:"small"===h,large:"large"===h,minimal:!0,title:"网页全文翻译"}),[re,oe]=Object(r.useState)(!1),ae=o.a.createElement(l.d,{className:"cut-btn",onClick:()=>oe(!0),icon:o.a.createElement(l.w,{icon:"video",iconSize:_.a[h]}),small:"small"===h,large:"large"===h,minimal:!0,title:"音视频翻译",style:{marginRight:2}});return o.a.createElement("div",{id:"app",ref:j},e&&o.a.createElement(o.a.Fragment,null,o.a.createElement(L,{btnPos:F,setBtnPos:y,onBtnClick:J}),o.a.createElement(k,{show:v,pin:p,setMaxHeight:D,setPin:e=>{t("function"==typeof e?t=>{t.pin=e(t.pin)}:{pin:e})},range:x,placement:d,ref:C},o.a.createElement(_.b,{hasDragTip:!0,ref:X,style:{maxHeight:S},headerLeft:o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne,{pin:p,onClick:()=>{t((e=>{const t=!e.pin;e.pin=t,window.setTimeout((()=>{var e,n;t?null===(e=C.current)||void 0===e||e.switch2pin():null===(n=C.current)||void 0===n||n.clearPos()}))}))},size:h}),e.tipOcrChangeClosed?G:o.a.createElement(l.H,{enforceFocus:!1,content:o.a.createElement("div",{className:"bp3-text-small",style:{width:"200px",padding:"5px"}},"从现在起，截图翻译无需任何配置、也无需购买会员即可免费体验，快试试吧！",o.a.createElement("a",{onClick:()=>{t({tipOcrChangeClosed:!0})}},"不再提示")),canEscapeKeyClose:!1,isOpen:!e.tipOcrChangeClosed,usePortal:!1},G),ne,ae),headerRight:o.a.createElement(l.d,{icon:o.a.createElement(l.w,{icon:"cross",iconSize:_.a[h]+4}),onClick:()=>{w(!1)},small:f,large:b,minimal:!0,title:"关闭(Esc)"}),extendOptions:o.a.createElement(o.a.Fragment,null,o.a.createElement(l.h,{inline:!0,large:b,label:"显示文本框",checked:e.showTextArea,onChange:e=>{t({showTextArea:e.target.checked})}}),o.a.createElement(l.h,{large:b,style:{marginRight:"0"},disabled:I.b,label:"鼠标悬浮取词",inline:!0,checked:O,onChange:()=>T((e=>!e))})),showTextArea:e.showTextArea,toaster:W||void 0,size:h}))),o.a.createElement(l.T,{position:"top",ref:U,className:"app-toaster-container",usePortal:!1}),o.a.createElement(Fe,{open:ee,setOpen:te}),o.a.createElement(Z,{isShow:N,setIsShow:Y,isLocalOCR:n,imgSrc:K,onText:(e,t)=>{var n;null===(n=X.current)||void 0===n||n.ocr(e).then((e=>{var n;const r=window.pageXOffset,o=window.pageYOffset;A({getBoundingClientRect(){const e=t.top-(window.pageYOffset-o),n=t.left-(window.pageXOffset-r);return{top:e,left:n,width:t.width,height:t.height,right:n+t.width,bottom:e+t.height}}}),null===(n=X.current)||void 0===n||n.translate(e),w(!0)}),P.a)}}),o.a.createElement(ke,{show:re,onClose:()=>oe(!1),onText:e=>{var t;null===(t=X.current)||void 0===t||t.translate(e),w(!0)}}))}var Re=n(408),Me=n.n(Re),Pe=n(238);function ze(){return o.a.createElement(Pe.a,{id:"__hcfy__",stylesheetURLs:["blueprint-select.css","cropper.css"],cssText:(e=Me.a,e.replace(/url\((["']?)(.*?)\1\)/g,(function(e,t,n){return n.startsWith("data:")?e:`url(${browser.runtime.getURL(n)})`})))},o.a.createElement(Ie,null));var e}},32:function(e,t,n){"use strict";function r(e){return`${e.host}${e.path}`}function o(e){const t=e.match(/^(([^:]+):\/\/)?([^/]+)?(\/.*)?$/);if(!t)return;let n=t[3]||"";const r=n.indexOf(":");r>=0&&(n=n.slice(0,r));let o=t[4]||"";const a=o.indexOf("#");if(a>=0&&(o=o.slice(0,a)),!n.startsWith(".")){if(!o){if(!n)return;o="/"}return{host:n,path:o}}}function a(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(t)}function i(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(t)}function s(e,t){let n;if(n="string"==typeof t?o(t):t,n)return{isHostMatch:{ruleHost:e.host,urlHost:n.host,matches:a(e.host,n.host)},isPathMatch:{rulePath:e.path,urlPath:n.path,matches:i(e.path,n.path)}}}function l(e,t,n){let r,s;r="string"==typeof e?o(e):e;let l=!1,u=!1;if(r){const e=e=>{const t=function(e,t){let n;if(n="string"==typeof t?o(t):t,n)return a(e.host,n.host)&&i(e.path,n.path)}(e,r);return t&&(s=e),t};l=n.some(e),l||(u=t.some(e))}return{urlParts:r,matchedRule:s,whiteListMatched:l,blackListMatched:u}}function u(e,t,n){const r=l(e,t,n);return!r.urlParts||r.whiteListMatched||!r.blackListMatched}n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}))},408:function(e,t,n){var r=n(641);e.exports="string"==typeof r?r:r.toString()},410:function(e,t,n){var r=n(645);e.exports="string"==typeof r?r:r.toString()},46:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i}));const r=browser.runtime.getURL("/pdf-viewer/web/viewer.html");function o(e){return e.startsWith(r)}function a(e){let t,n,o;e&&("string"==typeof e?t=e:(t=e.file,n=e.blocked,o=e.incognito));let a="",i="";if(t){const e=new URL(t);a+=`&file=${encodeURIComponent(t)}`,i=e.hash}return n&&(a+="&_blocked"),o&&(a+="&_incognito"),r+a.replace("&","?")+i}function i(e){return async function(e){const t=await browser.tabs.create({url:e}),n=await browser.windows.get(t.windowId);n.focused||await browser.windows.update(n.id,{drawAttention:!0})}(a(e))}},641:function(e,t,n){var r=n(287),o=n(642),a=n(643),i=n(644),s=r(!1),l=o(a),u=o(i);s.push([e.i,"#translate-panel{background-color:#f5f8fa;display:flex;flex-direction:column;padding-bottom:8px}.bp3-dark #translate-panel{background-color:#293742}#translate-panel .fixed{flex-shrink:0;margin-bottom:10px}#translate-panel .body{flex-grow:1;overflow:auto;overscroll-behavior:contain}#translate-panel .body::-webkit-scrollbar{width:8px;background-color:rgba(0,0,0,0);-webkit-border-radius:100px}#translate-panel .body::-webkit-scrollbar:hover{background-color:rgba(0,0,0,0.09)}#translate-panel .body::-webkit-scrollbar-thumb:vertical{background:rgba(0,0,0,0.5);-webkit-border-radius:100px}#translate-panel .body::-webkit-scrollbar-thumb:vertical:active{background:rgba(0,0,0,0.61);-webkit-border-radius:100px}#translate-panel.size-small,#translate-panel.size-small h6.bp3-heading,#translate-panel.size-small .bp3-control.bp3-large,#translate-panel.size-small textarea.bp3-input.bp3-small{font-size:14px}#translate-panel.size-small .phonetic-item,#translate-panel.size-small .quick-settings a{font-size:12px}#translate-panel.size-middle,#translate-panel.size-middle h6.bp3-heading,#translate-panel.size-middle .bp3-control.bp3-large,#translate-panel.size-middle textarea.bp3-input{font-size:18px}#translate-panel.size-middle .phonetic-item,#translate-panel.size-middle .quick-settings a{font-size:14px}#translate-panel.size-large,#translate-panel.size-large h6.bp3-heading,#translate-panel.size-large .bp3-control.bp3-large,#translate-panel.size-large textarea.bp3-input.bp3-large{font-size:22px}#translate-panel.size-large .source,#translate-panel.size-large .phonetic-item,#translate-panel.size-large .quick-settings a{font-size:18px}#translate-panel .bp3-button.bp3-small,#translate-panel .bp3-small .bp3-button{min-height:20px;min-width:20px}#translate-panel .header{display:flex;align-items:center;padding:4px 6px 4px 10px;border-bottom:1px solid #d1d1d1}.bp3-dark #translate-panel .header{border-bottom-color:rgba(16,22,26,0.4)}#translate-panel .header .drag-block{min-width:5px;flex-shrink:0;flex-grow:1;align-self:stretch}#translate-panel .header .left{flex-shrink:0;display:flex}#translate-panel .header .right{flex-shrink:0;display:flex;align-items:center}#translate-panel .header .right .bp3-icon-arrow-right{flex-shrink:0;margin:0 5px}#translate-panel .header .right>.bp3-button{flex-shrink:0;margin:0 1px}#translate-panel .header .right>.bp3-button:last-child{margin-right:0}#translate-panel .quick-settings{padding:4px 9px;margin:0 1px}#translate-panel .quick-settings>div{margin-bottom:5px}#translate-panel .quick-settings .bp3-control{margin-bottom:0}#translate-panel .query-text{position:relative;padding:10px 10px 2px 10px}#translate-panel .query-text textarea.bp3-input{min-height:44px;font-family:system-ui, -apple-system, 'Segoe UI', 'Roboto', 'Ubuntu', 'Cantarell', 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';overscroll-behavior:contain}#translate-panel .query-text .translate-btn{position:absolute;opacity:0.6}#translate-panel .query-text .translate-btn:hover{opacity:1}#translate-panel .body{padding:0 10px}#translate-panel .body .bp3-card:first-child{margin-top:1px}#translate-panel .body .bp3-card:last-child{margin-bottom:1px}#translate-panel .body .no-api{margin:20px 0}.result-block{margin:8px 0;padding:2px 5px}.result-block .bp3-button{visibility:hidden}.result-block .error .bp3-button,.result-block:hover .bp3-button{visibility:visible}.result-block .legend{display:flex;align-items:center;justify-content:space-between}.result-block .legend .legend-left{display:flex;align-items:center}.result-block .legend .api-ico,.result-block .legend .bp3-heading{flex-shrink:0;white-space:nowrap}.result-block .legend .api-ico{display:inline-block;width:14px;height:14px;background-size:contain;margin-right:3px}.result-block .legend .bp3-heading{margin-bottom:0;margin-right:10px}.result-block .legend .source{cursor:pointer;font-size:12px}.result-block .legend .source .bp3-icon{position:relative;top:-1px;margin-left:1px}.result-block .phonetic{display:flex;flex-wrap:wrap}.result-block .phonetic .phonetic-item{display:flex;align-items:center;font-size:12px}.result-block .phonetic .phonetic-item:not(:last-child){margin-right:12px}.result-block .common-result p{line-height:1.3;margin:2px 0;overflow-wrap:break-word}.result-block .common-result .dict a{text-decoration:underline}.result-block .error{font-size:12px;padding:5px 10px}.result-block .dict-pos{margin-right:5px}.external-translators{margin-bottom:3px;padding:0;display:flex;flex-wrap:wrap}.external-translators>div{margin:0 5px 5px 0}.quick-links a{margin:0 5px 5px 0}#popper-container{width:250px;max-width:100%;position:absolute;left:0;top:0;z-index:9999999999;touch-action:none;transition:opacity 0.2s;background-color:#f5f8fa}.bp3-dark #popper-container{background-color:#293742}#popper-container.show{opacity:1;pointer-events:auto;user-select:auto}#popper-container,#popper-container[data-popper-reference-hidden='true']{opacity:0;pointer-events:none;user-select:none}#popper-container .drag-block{cursor:grab}#popper-container.pin{position:fixed}#popper-container.pin .arrow{display:none}#popper-container .arrow,#popper-container .arrow::before{position:absolute;width:8px;height:8px;z-index:-1}#popper-container .arrow::before{content:'';transform:rotate(45deg);background:#f5f8fa}.bp3-dark #popper-container .arrow::before{background-color:#293742}#popper-container .arrow{display:none}#popper-container.show[data-popper-placement]:not([data-popper-reference-hidden='true']) .arrow{display:block}#popper-container[data-popper-placement^='top'] .arrow{bottom:-5px}#popper-container[data-popper-placement^='top'] .arrow::before{border-right:1px solid #d1d1d1;border-bottom:1px solid #d1d1d1}#popper-container[data-popper-placement^='bottom'] .arrow{top:-5px}#popper-container[data-popper-placement^='bottom'] .arrow::before{border-left:1px solid #d1d1d1;border-top:1px solid #d1d1d1}#popper-container[data-popper-placement^='left'] .arrow{right:-5px}#popper-container[data-popper-placement^='left'] .arrow::before{border-right:1px solid #d1d1d1;border-top:1px solid #d1d1d1}#popper-container[data-popper-placement^='right'] .arrow{left:-5px}#popper-container[data-popper-placement^='right'] .arrow::before{border-left:1px solid #d1d1d1;border-bottom:1px solid #d1d1d1}#translate-btn{display:none;position:absolute;z-index:9999999999;left:0;top:0}#translate-btn .bp3-button{padding:2px;min-width:0;min-height:0}#translate-btn .btn-icon{width:18px;height:18px;background-image:url("+l+");background-size:contain}.bp3-dark #translate-btn .btn-icon{background-image:url("+u+")}#translate-btn.show{display:block}.translate-type-selector .bp3-label{display:inline}.translate-type-selector .bp3-radio{margin-bottom:0}#ocr-container{position:fixed;z-index:99999999999999;left:0;top:0;right:0;bottom:0}#ocr-container .toolbar{display:none;position:absolute;z-index:1}#ocr-container img{max-width:100%}#app{cursor:default}.switch-pin{flex-shrink:0;cursor:pointer}.switch-pin .bp3-icon-pin{transition:transform 0.2s, color 0.2s;transform:rotate(-45deg)}.pin .switch-pin .bp3-icon-pin{transform:rotate(-70deg)}.cut-btn{margin-left:2px}.app-toaster-container{position:fixed !important;z-index:9999999999 !important}\n",""]),e.exports=s},643:function(e,t,n){"use strict";n.r(t),t.default=n.p+"logo.png"},644:function(e,t,n){"use strict";n.r(t),t.default=n.p+"logowhite36.png"},645:function(e,t,n){var r=n(287)(!1);r.push([e.i,"#root{-webkit-text-size-adjust:100%;box-sizing:border-box;font-size:14px;font-weight:400;letter-spacing:0;line-height:1.28581;text-transform:none;color:#182026;font-family:-apple-system, 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Open Sans', 'Helvetica Neue', 'Icons16', sans-serif}#root{touch-action:manipulation}\n",""]),e.exports=r}}]);